var at=Object.defineProperty;var et=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var nt=(P,w,$)=>w in P?at(P,w,{enumerable:!0,configurable:!0,writable:!0,value:$}):P[w]=$,W=(P,w)=>{for(var $ in w||(w={}))ft.call(w,$)&&nt(P,$,w[$]);if(et)for(var $ of et(w))st.call(w,$)&&nt(P,$,w[$]);return P};import{w as ct}from"./index-63348562.js";var Y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ot(P){throw new Error('Could not dynamically require "'+P+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ut={exports:{}};(function(P){(function(){function w(B,t){return t?ot(B):B.slice?w[a(B)]:function(f,d){B(f={exports:{}}),w[a(d)]=f.exports};function a(f){return f.split("/").slice(-1).toString().replace(".js","")}}var $=P;w(function(B){String.random=function(a,f){var d="";for(a=a||24,f=f||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";a-- >0;)d+=f.charAt(Math.floor(Math.random()*f.length));return d},String.match=function(a,f){var d,p;return typeof a!="string"?!1:(typeof f=="string"&&(f={"=":f}),f=f||{},d=f["="]||f["*"]||f[">"]||f["<"],a===d?!0:p!==f["="]?!1:(d=f["*"]||f[">"],a.slice(0,(d||"").length)===d?!0:p!==f["*"]?!1:p!==f[">"]&&p!==f["<"]?a>=f[">"]&&a<=f["<"]:p!==f[">"]&&a>=f[">"]||p!==f["<"]&&a<=f["<"]))},String.hash=function(a,f){if(typeof a=="string"){if(f=f||0,!a.length)return f;for(var d=0,p=a.length,n;d<p;++d)n=a.charCodeAt(d),f=(f<<5)-f+n,f|=0;return f}};var t=Object.prototype.hasOwnProperty;Object.plain=function(a){return a?a instanceof Object&&a.constructor===Object||Object.prototype.toString.call(a).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(a,f){for(var d in a)if(t.call(a,d)&&(!f||f.indexOf(d)==-1))return!1;return!0},Object.keys=Object.keys||function(a){var f=[];for(var d in a)t.call(a,d)&&f.push(d);return f},function(){var a,f=setTimeout,d=0,p=0,n=typeof setImmediate!=""+a&&setImmediate||f;f.hold=f.hold||9,f.poll=f.poll||function(u){if(f.hold>=+new Date-d&&p++<3333){u();return}n(function(){d=+new Date,u()},p=0)}}(),function(){var a=setTimeout,f=a.turn=a.turn||function(g){d.push(g)==1&&p(i)},d=f.s=[],p=a.poll,n=0,u,i=function(){(u=d[n++])&&u(),(n==d.length||n==99)&&(d=f.s=d.slice(n),n=0),d.length&&p(i)}}(),function(){var a,f=setTimeout,d=f.turn;(f.each=f.each||function(p,n,u,i){i=i||9,function g(m,c,h){if(c=(m=(p||[]).splice(0,i)).length){for(var v=0;v<c&&a===(h=n(m[v]));v++);if(a===h){d(g);return}}u&&u(h)}()})()}()})(w,"./shim"),w(function(B){B.exports=function t(u,f,d){if(!u)return{to:t};var p,n=typeof f=="function",u=(this.tag||(this.tag={}))[u]||n&&(this.tag[u]={tag:u,to:t._={next:function(g){var m;(m=this.to)&&m.next(g)}}});if(n){var i={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:f,the:u,on:this,as:d};return(i.back=u.last||u).to=i,u.last=i}return(u=u.to)&&p!==f&&u.next(f),u}})(w,"./onto"),w(function(B){B.exports=function(t){return t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"&&t!=1/0&&t!=-1/0&&t===t||!!t&&typeof t["#"]=="string"&&Object.keys(t).length===1&&t["#"]}})(w,"./valid"),w(function(B){w("./shim");function t(){var u=+new Date;return p<u?(f=0,p=u+t.drift):p=u+(f+=1)/d+t.drift}t.drift=0;var a=-1/0,f=0,d=999,p=a,n;t.is=function(u,i,g){var m=i&&u&&u._&&u._[">"]||g;if(!!m)return typeof(m=m[i])=="number"?m:a},t.ify=function(u,i,g,m,c){(u=u||{})._=u._||{},c&&(u._["#"]=c);var h=u._[">"]||(u._[">"]={});return n!==i&&i!=="_"&&(typeof g=="number"&&(h[i]=g),n!==m&&(u[i]=m)),u},B.exports=t})(w,"./state"),w(function(B){w("./shim");function t(a){var f={s:{}},d=f.s;a=a||{max:999,age:1e3*9},f.check=function(n){return d[n]?p(n):!1};var p=f.track=function(n){var u=d[n]||(d[n]={});return u.was=f.now=+new Date,f.to||(f.to=setTimeout(f.drop,a.age+9)),u};return f.drop=function(n){f.to=null,f.now=+new Date;var u=Object.keys(d);console.STAT&&console.STAT(f.now,+new Date-f.now,"dup drop keys"),setTimeout.each(u,function(i){var g=d[i];g&&(n||a.age)>f.now-g.was||delete d[i]},0,99)},f}B.exports=t})(w,"./dup"),w(function(B){w("./onto"),B.exports=function(f,d){if(!!this.on){var p=(this.opt||{}).lack||9e3;if(typeof f!="function"){if(!f)return;var u=f["#"]||f,n=(this.tag||"")[u];return n?(d&&(n=this.on(u,d),clearTimeout(n.err),n.err=setTimeout(function(){n.off()},p)),!0):void 0}var u=d&&d["#"]||t(9);if(!f)return u;var i=this.on(u,f,d);return i.err=i.err||setTimeout(function(){i.off(),i.next({err:"Error: No ACK yet.",lack:!0})},p),u}};var t=String.random||function(){return Math.random().toString(36).slice(2)}})(w,"./ask"),w(function(B){function t(c){return c instanceof t?(this._={$:this}).$:this instanceof t?t.create(this._={$:this,opt:c}):new t(c)}t.is=function(c){return c instanceof t||c&&c._&&c===c._.$||!1},t.version=.202,t.chain=t.prototype,t.chain.toJSON=function(){},w("./shim"),t.valid=w("./valid"),t.state=w("./state"),t.on=w("./onto"),t.dup=w("./dup"),t.ask=w("./ask"),function(){t.create=function(r){r.root=r.root||r,r.graph=r.graph||{},r.on=r.on||t.on,r.ask=r.ask||t.ask,r.dup=r.dup||t.dup();var b=r.$.opt(r.opt);return r.once||(r.on("in",c,r),r.on("out",c,r),r.on("put",k,r),t.on("create",r),r.on("create",r)),r.once=1,b};function c(r){if(!!r){if(r.out===c){this.to.next(r);return}var b=this,A=b.as,O=A.at||A,D=O.$,T=O.dup,G,N=r.DBG;if((G=r["#"])||(G=r["#"]=f(9)),!T.check(G)){if(T.track(G),G=r._,r._=typeof G=="function"?G:function(){},r.$&&r.$===(r.$._||"").$||(r.$=D),r["@"]&&!r.put&&s(r),!O.ask(r["@"],r))if(N&&(N.u=+new Date),r.put){h(r);return}else r.get&&t.on.get(r,D);N&&(N.uc=+new Date),b.to.next(r),N&&(N.ua=+new Date),!(r.nts||r.NTS)&&(r.out=c,O.on("out",r),N&&(N.ue=+new Date))}}}function h(r){if(!!r){var b=r._||"",A=b.root=((b.$=r.$||"")._||"").root;if(r["@"]&&b.faith&&!b.miss){r.out=c,A.on("out",r);return}b.latch=A.hatch,b.match=A.hatch=[];var O=r.put,D=b.DBG=r.DBG,T=+new Date;if(C=C||T,!(O["#"]&&O["."])){D&&(D.p=T),b["#"]=r["#"],b.msg=r,b.all=0,b.stun=1;var G=Object.keys(O);console.STAT&&console.STAT(T,((D||b).pk=+new Date)-T,"put sort");var N=0,I,U,J,R,K,H,q;(function F(z){if(I!=N){if(I=N,!(J=G[N])){console.STAT&&console.STAT(T,((D||b).pd=+new Date)-T,"put"),o(b);return}(R=O[J])?(q=R._)?J!==q["#"]?H=l+_(J)+"soul not same.":(K=q[">"])||(H=l+_(J)+"no state."):H=l+_(J)+"no meta.":H=l+_(J)+"no node.",U=Object.keys(R||{})}if(H){r.err=b.err=H,o(b);return}var Z=0,M;for(z=z||0;z++<9&&(M=U[Z++]);)if(M!=="_"){var L=R[M],tt=K[M];if(i===tt){H=l+_(M)+"on"+_(J)+"no state.";break}if(!p(L)){H=l+_(M)+"on"+_(J)+"bad "+typeof L+_(L);break}v(L,M,J,tt,r),++E}if((U=U.slice(Z)).length){d(F);return}++N,U=null,F(z)})()}}}t.on.put=h;function v(r,b,A,O,D){var T=D._||"",G=T.root,N=G.graph,I,U=N[A]||g,J=n(U,b,1),R=U[b],K=T.DBG;(I=console.STAT)&&(!N[A]||!R)&&(I.has=(I.has||0)+1);var H=j();if(O>H){setTimeout(function(){v(r,b,A,O,D)},(I=O-H)>x?x:I),console.STAT&&console.STAT((K||T).Hf=+new Date,I,"future");return}if(!(O<J&&!T.miss)&&!(!T.faith&&O===J&&(r===R||S(r)<=S(R))&&!T.miss)){T.stun++;var q=D["#"]+T.all++,F={toString:function(){return q},_:T};F.toJSON=F.toString,K&&(K.ph=K.ph||+new Date),G.on("put",{"#":F,"@":D["@"],put:{"#":A,".":b,":":r,">":O},_:T})}}function k(r){var b;(b=(r._||"").DBG)&&(b.pa=+new Date,b.pm=b.pm||+new Date);var A=this,O=A.as,D=O.graph,T=r._,G=r.put,N=G["#"],I=G["."],U=G[":"],J=G[">"];r["#"];var R;(R=T.msg)&&(R=R.put)&&(R=R[N])&&u(R,I,J,U,N),D[N]=u(D[N],I,J,U,N),(R=(O.next||"")[N])&&R.on("in",r),o(T),A.to.next(r)}function o(r,b){var A;if(!r.stop&&!(!r.err&&0<--r.stun)&&(r.stop=1,!!(A=r.root))){var O=r.match;O.end=1,O===A.hatch&&(!(O=r.latch)||O.end?delete A.hatch:A.hatch=O),r.hatch&&r.hatch(),setTimeout.each(r.match,function(D){D&&D()}),!(!(b=r.msg)||r.err||b.err)&&(b.out=c,r.root.on("out",b),y())}}function s(r){var b=r["@"]||"",A;!(A=b._)||(A.acks=(A.acks||0)+1,(A.err=r.err)&&(r["@"]=A["#"],o(A)),!A.stop&&!A.crack&&(A.crack=A.match&&A.match.push(function(){e(A)})),e(A))}function e(r){!r||!r.root||r.stun||r.acks!==r.all||r.root.on("in",{"@":r["#"],err:r.err,ok:r.err?i:{"":1}})}var l="Error: Invalid graph!",_=function(r){return" '"+(""+r).slice(0,9)+"...' "},S=JSON.stringify,x=2147483647,j=t.state,E=0,C,y=function(){E>999&&E/-(C-(C=+new Date))>1&&(t.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),y=function(){E=0})}}(),function(){t.on.get=function(h,v){var k=v._,o=h.get,s=o["#"],e=k.graph[s],l=o["."],_=k.next||(k.next={});_[s];var S=h._||{},x=S.DBG=h.DBG;if(x&&(x.g=+new Date),!e)return k.on("get",h);if(l){if(typeof l!="string"||i===e[l])return k.on("get",h);e=u({},l,n(e,l),e[l],s)}e&&c(h,e),k.on("get",h)};function c(h,v){var k=+new Date,o=h._||{},s=o.DBG=h.DBG,e=h["#"],l=f(9),_=Object.keys(v||"").sort(),S=((v||"")._||"")["#"];_.length;var x=h.$._.root,j=v===x.graph[S];console.STAT&&console.STAT(k,((s||o).gk=+new Date)-k,"got keys"),v&&function E(){k=+new Date;for(var C=0,y,r={},b;C<9&&(y=_[C++]);)u(r,y,n(v,y),v[y],S);_=_.slice(C),(b={})[S]=r,r=b;var A;j&&(A=function(){},A.ram=A.faith=!0),b=_.length,console.STAT&&console.STAT(k,-(k-(k=+new Date)),"got copied some"),s&&(s.ga=+new Date),x.on("in",{"@":e,"#":l,put:r,"%":b?l=f(9):i,$:x.$,_:A,DBG:s}),console.STAT&&console.STAT(k,+new Date-k,"got in"),b&&setTimeout.turn(E)}(),v||x.on("in",{"@":h["#"]})}t.on.get.ack=c}(),function(){t.chain.opt=function(c){c=c||{};var h=this,v=h._,k=c.peers||c;return Object.plain(c)||(c={}),Object.plain(v.opt)||(v.opt=c),typeof k=="string"&&(k=[k]),Object.plain(v.opt.peers)||(v.opt.peers={}),k instanceof Array&&(c.peers={},k.forEach(function(o){var s={};s.id=s.url=o,c.peers[o]=v.opt.peers[o]=v.opt.peers[o]||s})),a(c,function o(s){var e=this[s];if(this&&this.hasOwnProperty(s)||typeof e=="string"||Object.empty(e)){this[s]=e;return}e&&e.constructor!==Object&&!(e instanceof Array)||a(e,o)}),v.opt.from=c,t.on("opt",v),v.opt.uuid=v.opt.uuid||function(s){return t.state().toString(36).replace(".","")+String.random(s||12)},h}}();var a=function(c,h){Object.keys(c).forEach(h,c)},f=String.random,d=setTimeout.turn,p=t.valid,n=t.state.is,u=t.state.ify,i,g={},m;t.log=function(){return!t.log.off&&m.log.apply(m,arguments),[].slice.call(arguments).join(" ")},t.log.once=function(c,h,v){return(v=t.log.once)[c]=v[c]||0,v[c]++||t.log(h)},typeof window!="undefined"&&((window.GUN=window.Gun=t).window=window);try{typeof $!="undefined"&&($.exports=t)}catch{}B.exports=t,(t.window||{}).console=(t.window||{}).console||{log:function(){}},(m=console).only=function(c,h){return m.only.i&&c===m.only.i&&m.only.i++&&(m.log.apply(m,arguments)||h)},t.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(w,"./root"),w(function(B){var t=w("./root");t.chain.back=function(d,p){var n;if(d=d||1,d===-1||d===1/0)return this._.root.$;if(d===1)return(this._.back||this._).$;var u=this,i=u._;if(typeof d=="string"&&(d=d.split(".")),d instanceof Array){var g=0,m=d.length,n=i;for(g;g<m;g++)n=(n||a)[d[g]];return f!==n?p?u:n:(n=i.back)?n.$.back(d,p):void 0}if(typeof d=="function"){for(var c,n={back:i};(n=n.back)&&f===(c=d(n,p)););return c}return typeof d=="number"?(i.back||i).$.back(d-1):this};var a={},f})(w,"./back"),w(function(B){var t=w("./root");t.chain.chain=function(o){var s=this,e=s._,l=new(o||s).constructor(s),_=l._,S;return _.root=S=e.root,_.id=++S.once,_.back=s._,_.on=t.on,_.on("in",t.on.in,_),_.on("out",t.on.out,_),l};function a(o){var s,e=this.as,l=e.back,_=e.root,S;if(o.$||(o.$=e.$),this.to.next(o),e.err){e.on("in",{put:e.put=i,$:e.$});return}if(s=o.get){if(_.pass&&(_.pass[e.id]=e),e.lex&&Object.keys(e.lex).forEach(function(x){S[x]=e.lex[x]},S=o.get=o.get||{}),s["#"]||e.soul){if(s["#"]=s["#"]||e.soul,o["#"]||(o["#"]=g(9)),l=_.$.get(s["#"])._,s=s["."]){if(c(l.put,s)&&(S=l.ask&&l.ask[s],(l.ask||(l.ask={}))[s]=l.$.get(s)._,l.on("in",{get:s,put:{"#":l.soul,".":s,":":l.put[s],">":v(_.graph[l.soul],s)}}),S))return}else{if(S=l.ask&&l.ask[""],(l.ask||(l.ask={}))[""]=l,i!==l.put&&(l.on("in",l),S))return;o.$=l.$}return _.ask(n,o),_.on("in",o)}if(s["."])return e.get?(o={get:{".":e.get},$:e.$},(l.ask||(l.ask={}))[e.get]=o.$._,l.on("out",o)):(o={get:e.lex?o.get:{},$:e.$},l.on("out",o));if((e.ask||(e.ask={}))[""]=e,e.get)return s["."]=e.get,(l.ask||(l.ask={}))[e.get]=o.$._,l.on("out",o)}return l.on("out",o)}t.on.out=a;function f(o,s){s=s||this.as;var e=s.root,l=o.$||(o.$=s.$),_=(l||"")._||u,S=o.put||"",x=S["#"],j=S["."],E=i!==S["="]?S["="]:S[":"],C=S[">"]||-1/0,y;if(i!==o.put&&(i===S["#"]||i===S["."]||i===S[":"]&&i===S["="]||i===S[">"])){if(!m(S)){if(!(x=((S||"")._||"")["#"])){console.log("chain not yet supported for",S,"...",o,s);return}return l=s.root.$.get(x),setTimeout.each(Object.keys(S).sort(),function(r){r=="_"||i===(C=v(S,r))||s.on("in",{$:l,put:{"#":x,".":r,"=":S[r],">":C},VIA:o})})}s.on("in",{$:_.back.$,put:{"#":x=_.back.soul,".":j=_.has||_.get,"=":S,">":v(_.back.put,j)},via:o});return}(o.seen||"")[s.id]||((o.seen||(o.seen=function(){}))[s.id]=s,s!==_&&(Object.keys(o).forEach(function(r){S[r]=o[r]},S={}),S.get=s.get||S.get,!s.soul&&!s.has?S.$$$=S.$$$||s.$:_.soul&&(S.$=s.$,S.$$=S.$$||_.$),o=S),p(o,s),(s.soul||o.$$)&&C>=v(e.graph[x],j)&&((S=e.$.get(x)._).put=k(S.put,j,C,E,x)),!_.soul&&C>=v(e.graph[x],j)&&(y=(e.$.get(x)._.next||"")[j])&&(y.put=E,typeof(S=m(E))=="string"&&(y.put=e.$.get(S)._.put||E)),this.to&&this.to.next(o),s.any&&setTimeout.each(Object.keys(s.any),function(r){(r=s.any[r])&&r(o)},0,99),s.echo&&setTimeout.each(Object.keys(s.echo),function(r){(r=s.echo[r])&&r.on("in",o)},0,99),((o.$$||"")._||_).soul&&(y=s.next)&&(y=y[j])&&(S={},Object.keys(o).forEach(function(r){S[r]=o[r]}),S.$=(o.$$||o.$).get(S.get=j),delete S.$$,delete S.$$$,y.on("in",S)),d(o,s))}t.on.in=f;function d(o,s){if(s=s||this.as||o.$._,!(o.$$&&this!==t.on)&&!(!o.put||s.soul)){var e=o.put||"",l=e["="]||e[":"],j,_=s.root,S=_.$.get(e["#"]).get(e["."])._;if(typeof(l=m(l))!="string"){this===t.on&&((S.echo||(S.echo={}))[s.id]=s);return}if(!((S.echo||(S.echo={}))[s.id]&&!(_.pass||"")[s.id])){if(j=_.pass){if(j[l+s.id])return;j[l+s.id]=1}(S.echo||(S.echo={}))[s.id]=s,s.has&&(s.link=l);var x=_.$.get(S.link=l)._;(x.echo||(x.echo={}))[S.id]=S;var j=s.ask||"";(j[""]||s.lex)&&x.on("out",{get:{"#":l}}),setTimeout.each(Object.keys(j),function(E,C){!E||!(C=j[E])||C.on("out",{get:{"#":l,".":E}})},0,99)}}}t.on.link=d;function p(o,s){var e=o.put||"",l=i!==e["="]?e["="]:e[":"],_=s.root,S,x;if(i===l){if(s.soul&&i!==s.put||(x=(o.$$||o.$||"")._||"",o["@"]&&(i!==x.put||i!==s.put)))return;(S=s.link||o.linked)&&delete(_.$.get(S)._.echo||"")[s.id],s.has&&(s.link=null),s.put=i,setTimeout.each(Object.keys(s.next||""),function(j,E){!(E=s.next[j])||(S&&delete(_.$.get(S).get(j)._.echo||"")[E.id],E.on("in",{get:j,put:i,$:E.$}))},0,99);return}s.soul||o.$$||(S=m(l),x=o.$._||"",!((S===x.link||s.has&&!x.link)&&!((_.pass||"")[s.id]&&typeof S!="string"))&&(delete(x.echo||"")[s.id],p({get:s.get,put:i,$:o.$,linked:o.linked=o.linked||x.link},s)))}t.on.unlink=p;function n(o,s){var e=this.as,l=e.$._;l.root;var _=e.get||"",S=(o.put||"")[_["#"]]||"";if(!o.put||typeof _["."]=="string"&&i===S[_["."]]){if(i!==l.put||!l.soul&&!l.has)return;l.ack=(l.ack||0)+1,l.on("in",{get:l.get,put:l.put=i,$:l.$,"@":o["@"]});return}(o._||{}).miss=1,t.on.put(o)}var u={},i,g=String.random,m=t.valid,c=function(o,s){return o&&Object.prototype.hasOwnProperty.call(o,s)},h=t.state,v=h.is,k=h.ify})(w,"./chain"),w(function(B){var t=w("./root");t.chain.get=function(i,g,m){var c,h;if(typeof i=="string"){if(i.length==0)return(c=this.chain())._.err={err:t.log("0 length key!",i)},g&&g.call(c,c._.err),c;var v=this,k=v._,o=k.next||p;(c=o[i])||(c=i&&a(i,v)),c=c&&c.$}else if(typeof i=="function"){let x=function(j,E,C){if(!x.stun&&!((D=e.pass)&&!D[l])){var y=j.$._,r=(j.$$||"")._,b=(r||y).put,A=!y.has&&!y.soul,O={},D;if((A||u===b)&&(b=u===((D=j.put)||"")["="]?u===(D||"")[":"]?D:D[":"]:D["="]),typeof(D=t.valid(b))=="string"&&(b=u===(D=e.$.get(D)._.put)?s.not?u:b:D),!(s.not&&u===b)){if(u===s.stun){if((D=e.stun)&&D.on&&(k.$.back(function(T){if(D.on(""+T.id,O={}),(O.run||0)<x.id)return O}),!O.run&&D.on(""+y.id,O={}),!O.run&&r&&D.on(""+r.id,O={}),x.id>O.run&&((!O.stun||O.stun.end)&&(O.stun=D.on("stun"),O.stun=O.stun&&O.stun.last),O.stun&&!O.stun.end))){(O.stun.add||(O.stun.add={}))[l]=function(){x(j,E,1)};return}if(u===b&&(C=0),(D=e.hatch)&&!D.end&&u===s.hatch&&!C){if(_[y.$._.id])return;_[y.$._.id]=1,D.push(function(){x(j,E,1)});return}_={}}if(e.pass){if(e.pass[l+y.id])return;e.pass[l+y.id]=1}if(s.on){s.ok.call(y.$,b,y.get,j,E||x);return}if(s.v2020){s.ok(j,E||x);return}Object.keys(j).forEach(function(T){D[T]=j[T]},D={}),j=D,j.put=b,s.ok.call(s.as,j,E||x)}}};if(g===!0)return f(this,i,g,m),this;c=this;var k=c._,s=g||{},e=k.root,l;s.at=k,s.ok=i;var _={};return x.at=k,(k.any||(k.any={}))[l=String.random(7)]=x,x.off=function(){x.stun=1,k.any&&delete k.any[l]},x.rid=d,x.id=s.run||++e.once,h=e.pass,(e.pass={})[l]=1,s.out=s.out||{get:{}},k.on("out",s.out),e.pass=h,c}else{if(typeof i=="number")return this.get(""+i,g,m);if(typeof(h=n(i))=="string")return this.get(h,g,m);(h=this.get.next)&&(c=h(this,i))}return c?(g&&typeof g=="function"&&c.get(g,m),c):((c=this.chain())._.err={err:t.log("Invalid get request!",i)},g&&g.call(c,c._.err),c)};function a(i,g){var m=g._,c=m.next,h=g.chain(),v=h._;return c||(c=m.next={}),c[v.get=i]=v,g===m.root.$?v.soul=i:(m.soul||m.has)&&(v.has=i),v}function f(i,g,m,c){var h=i._,v=0,k;return(k=h.soul||h.link)?g(k,c,h):h.jam?h.jam.push([g,c]):(h.jam=[[g,c]],i.get(function(s,e){if(!(u===s.put&&!h.root.opt.super&&(k=Object.keys(h.root.opt.peers).length)&&++v<=k)){e.rid(s);var l=(l=s.$)&&l._||{},_=0,S;for(k=h.jam,delete h.jam;S=k[_++];){var x=S[0];S=S[1],x&&x(l.link||l.soul||t.valid(s.put)||((s.put||{})._||{})["#"],S,s,e)}}},{out:{get:{".":!0}}}),i)}function d(i){var g=this.at||this.on;if(!i||g.soul||g.has)return this.off();if(!!(i=(i=(i=i.$||i)._||i).id)){g.map;var m;if((m=this.seen||(this.seen={}))[i])return!0;m[i]=!0}}var p={},n=t.valid,u})(w,"./get"),w(function(B){var t=w("./root");t.chain.put=function(c,h,v){var k=this,o=k._,s=o.root;v=v||{},v.root=o.root,v.run||(v.run=s.once),a(v,o.id),v.ack=v.ack||h,v.via=v.via||k,v.data=v.data||c,v.soul||(v.soul=o.soul||typeof h=="string"&&h);var e=v.state=v.state||t.state();return typeof c=="function"?(c(function(l){v.data=l,k.put(n,n,v)}),k):v.soul?(v.$=s.$.get(v.soul),v.todo=[{it:v.data,ref:v.$}],v.turn=v.turn||i,v.ran=v.ran||f,function l(){var _=v.todo,S=_.pop(),x=S.it;S.ref&&S.ref._.id;var j,E,C,y,r;if(a(v,S.ref),(y=S.todo)&&(E=y.pop(),x=x[E],y.length&&_.push(S)),E&&(_.path||(_.path=[])).push(E),!(j=g(x))&&!(r=t.is(x))){if(!Object.plain(x)){f.err(v,"Invalid data: "+p(x)+" at "+(v.via.back(function(D){D.get&&y.push(D.get)},y=[])||y.join("."))+"."+(_.path||[]).join("."));return}for(var b=v.seen||(v.seen=[]),A=b.length;A--;)if(x===(y=b[A]).it){j=x=y.link;break}}if(E&&j)S.node=m(S.node,E,e,x);else{let D=function(T,G){var N=C.link["#"];G&&(G.off(),G.rid(T));var I=N||T.soul||(y=(T.$$||T.$)._||"").soul||y.link||((y=y.put||"")._||"")["#"]||y["#"]||((y=T.put||"")&&T.$$?y["#"]:(y["="]||y[":"]||"")["#"]);if(!N&&a(v,T.$),!I&&!S.link["#"]){(S.wait||(S.wait=[])).push(function(){D(T,G)});return}I||(I=[],(T.$$||T.$).back(function(U){if(y=U.soul||U.link)return I.push(y);I.push(U.get)}),I=I.reverse().join("/")),C.link["#"]=I,!r&&(((v.graph||(v.graph={}))[I]=C.node||(C.node={_:{}}))._["#"]=I),delete v.wait[O],C.wait&&setTimeout.each(C.wait,function(U){U&&U()}),v.ran(v)};if(!v.seen){f.err(v,"Data at root of graph must be a node (an object).");return}v.seen.push(C={it:x,link:{},todo:r?[]:Object.keys(x).sort().reverse(),path:(_.path||[]).slice(),up:S}),S.node=m(S.node,E,e,C.link),!r&&C.todo.length&&_.push(C);var O=v.seen.length;(v.wait||(v.wait={}))[O]="",y=(C.ref=r?x:E?S.ref.get(E):S.ref)._,(y=x&&(x._||"")["#"]||y.soul||y.link)?D({soul:y}):C.ref.get(D,{run:v.run,v2020:1,out:{get:{".":" "}}})}if(!_.length)return v.ran(v);v.turn(l)}(),k):(d(v),k)};function a(c,h){if(!!h){h=(h._||"").id||h;var v=c.root.stun||(c.root.stun={on:t.on}),k={},o;c.stun||(c.stun=v.on("stun",function(){})),(o=v.on(""+h))&&o.the.last.next(k),!(k.run>=c.run)&&v.on(""+h,function(s){if(c.stun.end){this.off(),this.to.next(s);return}s.run=s.run||c.run,s.stun=s.stun||c.stun})}}function f(c){if(c.err){f.end(c.stun,c.root);return}if(!(c.todo.length||c.end||!Object.empty(c.wait))){c.end=1;var h=c.$.back(-1)._,v=h.root,k=h.ask(function(l){v.on("ack",l),l.err&&t.log(l),++o>(c.acks||0)&&this.off(),c.ack&&c.ack(l,this)},c.opt),o=0,s=c.stun,e;(e=function(){!s||(f.end(s,v),setTimeout.each(Object.keys(s=s.add||""),function(l){(l=s[l])&&l()}))}).hatch=e,c.via._.on("out",{put:c.out=c.graph,opt:c.opt,"#":k,_:e})}}f.end=function(c,h){c.end=u,c.the.to===c&&c===c.the.last&&delete h.stun,c.off()},f.err=function(c,h){(c.ack||u).call(c,c.out={err:c.err=t.log(h)}),c.ran(c)};function d(c){var h=c.via._,v;c.via=c.via.back(function(k){if(k.soul||!k.get)return k.$;v=c.data,(c.data={})[k.get]=v}),(!c.via||!c.via._.soul)&&(c.via=h.root.$.get(((c.data||"")._||"")["#"]||h.$.back("opt.uuid")())),c.via.put(c.data,c.ack,c)}function p(c,h){return c&&(h=c.constructor)&&h.name||typeof c}var n,u=function(){},i=setTimeout.turn,g=t.valid,m=t.state.ify})(w,"./put"),w(function(B){var t=w("./root");w("./chain"),w("./back"),w("./put"),w("./get"),B.exports=t})(w,"./index"),w(function(B){var t=w("./index");t.chain.on=function(d,p,n,u){var i=this,g=i._;g.root;var m;if(typeof d=="string")return p?(m=g.on(d,p,n||g,u),n&&n.$&&(n.subs||(n.subs=[])).push(m),i):g.on(d);var c=p;return(c=c===!0?{change:!0}:c||{}).not=1,c.on=1,i.get(d,c),i},t.chain.once=function(d,p){if(p=p||{},!d)return a(this);var n=this,u=n._,i=u.root;u.put;var g=String.random(7),m;return n.get(function(c,h,v,k){var o=this,s=o._,e=s.one||(s.one={});if(k.stun||e[g]==="")return;if((m=t.valid(c))===!0){l();return}if(typeof m=="string")return;clearTimeout((u.one||"")[g]),clearTimeout(e[g]),e[g]=setTimeout(l,p.wait||99);function l(_){if(!s.has&&!s.soul&&(s={put:c,get:h}),f===(m=s.put)&&(m=((v.$$||"")._||"").put),typeof t.valid(m)=="string"&&(m=i.$.get(m)._.put,m===f&&!_)){e[g]=setTimeout(function(){l(1)},p.wait||99);return}k.stun||e[g]!==""&&(e[g]="",(u.soul||u.has)&&k.off(),d.call(o,m,s.get),clearTimeout(e[g]))}},{on:1}),n};function a(d,p,n){return t.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(n=d.chain())._.nix=d.once(function(u,i){n._.on("in",this._)}),n._.lex=d._.lex,n}t.chain.off=function(){var d=this,p=d._,n,u=p.back;if(!!u)return p.ack=0,(n=u.next)&&n[p.get]&&delete n[p.get],(n=u.ask)&&delete n[p.get],(n=u.put)&&delete n[p.get],(n=p.soul)&&delete u.root.graph[n],(n=p.map)&&Object.keys(n).forEach(function(i,g){g=n[i],g.link&&u.root.$.get(g.link).off()}),(n=p.next)&&Object.keys(n).forEach(function(i,g){g=n[i],g.$.off()}),p.on("off",{}),d};var f})(w,"./on"),w(function(B){var t=w("./index"),a=t.chain.get.next;t.chain.get.next=function(n,u){var i;return Object.plain(u)?(i=((i=u["#"])||"")["="]||i)?n.get(i):((i=n.chain()._).lex=u,n.on("in",function(g){String.match(g.get||(g.put||"")["."],u["."]||u["#"]||u)&&i.on("in",g),this.to.next(g)}),i.$):(a||d)(n,u)},t.chain.map=function(n,u,i){var g=this,m=g._,c,h;return Object.plain(n)&&(c=n["."]?n:{".":n},n=p),n?(t.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),h=g.chain(),g.map().on(function(v,k,o,s){var e=(n||d).call(this,v,k,o,s);if(p!==e){if(v===e)return h._.on("in",o);if(t.is(e))return h._.on("in",e._);var l={};Object.keys(o.put).forEach(function(_){l[_]=o.put[_]},l),l["="]=e,h._.on("in",{get:k,put:l})}}),h):((h=m.each)||((m.each=h=g.chain())._.lex=c||h._.lex||m.lex,h._.nix=g.back("nix"),g.on("in",f,h._)),h)};function f(n){this.to.next(n);var u=this.as,i=n.$,g=i._,m=n.put,c;!g.soul&&!n.$$||(c=u.lex)&&!String.match(n.get||(m||"")["."],c["."]||c["#"]||c)||t.on.link(n,u)}var d=function(){},p})(w,"./map"),w(function(B){var t=w("./index");t.chain.set=function(a,f,d){var p=this,n=p.back(-1),u,i;return f=f||function(){},d=d||{},d.item=d.item||a,(u=((a||"")._||"")["#"])&&((a={})["#"]=u),typeof(i=t.valid(a))=="string"?p.get(u=i).put(a,f,d):t.is(a)?(p.put(function(g){a.get(function(m,c,h){if(!m)return f.call(p,{err:t.log('Only a node can be linked! Not "'+h.put+'"!')});(i={})[m]={"#":m},g(i)},!0)}),a):(Object.plain(a)&&(a=n.get(u=p.back("opt.uuid")()).put(a)),p.get(u||n.back("opt.uuid")(7)).put(a,f,d))}})(w,"./set"),w(function(B){w("./shim");var t=function(){},a=JSON.parseAsync||function(n,u,i){var g,m=+new Date;try{u(g,JSON.parse(n,i),f.sucks(+new Date-m))}catch(c){u(c)}},f=JSON.stringifyAsync||function(n,u,i,g){var m,c=+new Date;try{u(m,JSON.stringify(n,i,g),f.sucks(+new Date-c))}catch(h){u(h)}};f.sucks=function(n){n>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),f.sucks=t)};function d(n){var u=function(){},i=n.opt||{};i.log=i.log||console.log,i.gap=i.gap||i.wait||0,i.max=i.max||(i.memory?i.memory*999*999:3e8)*.3,i.pack=i.pack||i.max*.01*.01,i.puff=i.puff||9;var g=setTimeout.turn||setTimeout,m=n.dup,c=m.check,h=m.track,v=u.hear=function(e,l){if(!!e){if(i.max<=e.length)return u.say({dam:"!",err:"Message too big!"},l);u===this&&(v.d+=e.length||0,++v.c);var _=l.SH=+new Date,S=e[0],x;if(S==="["){a(e,function(j,E){if(j||!E)return u.say({dam:"!",err:"DAM JSON parse error."},l);console.STAT&&console.STAT(+new Date,E.length,"# on hear batch");var C=i.puff;(function y(){for(var r=+new Date,b=0,A;b<C&&(A=E[b++]);)u.hear(A,l);E=E.slice(b),console.STAT&&console.STAT(r,+new Date-r,"hear loop"),k(l),E.length&&g(y,0)})()}),e="";return}if(S==="{"||(e["#"]||Object.plain(e))&&(x=e)){if(x)return v.one(x,l,_);a(e,function(j,E){if(j||!E)return u.say({dam:"!",err:"DAM JSON parse error."},l);v.one(E,l,_)});return}}};v.one=function(e,l,y){var S,x,j,E,C;if(e.DBG&&(e.DBG=C={DBG:e.DBG}),C&&(C.h=y),C&&(C.hp=+new Date),(S=e["#"])||(S=e["#"]=String.random(9)),!(j=c(S))&&(x=e["##"],!(x&&(j=e["@"]||e.get&&S)&&m.check(E=j+x)))){if((e._=function(){}).via=u.leap=l,(j=e["><"])&&typeof j=="string"&&j.slice(0,99).split(",").forEach(function(r){this[r]=1},e._.yo={}),j=e.dam){(j=u.hear[j])&&j(e,l,n),h(S);return}var y=+new Date;C&&(C.is=y),l.SI=S,n.on("in",u.last=e),C&&(C.hd=+new Date),console.STAT&&console.STAT(y,+new Date-y,e.get?"msg get":e.put?"msg put":"msg"),(j=h(S)).via=l,e.get&&(j.it=e),E&&h(E),u.leap=u.last=null}},v.c=v.d=0,function(){var e=0,l;u.hash=function(x,j){var E,C,y,r=+new Date;f(x.put,function b(A,O){var D=(C||(C=y=O||"")).slice(0,32768);if(E=String.hash(D,E),C=C.slice(32768),C){g(b,0);return}console.STAT&&console.STAT(r,+new Date-r,"say json+hash"),x._.$put=y,x["##"]=E,u.say(x,j),delete x._.$put},_)};function _(x,j){var E;return j instanceof Object?(Object.keys(j).sort().forEach(S,{to:E={},on:j}),E):j}function S(x){this.to[x]=this.on[x]}u.say=function(x,j){var E;if((E=this)&&(E=E.to)&&E.next&&E.next(x),!x)return!1;var C,y,r=x["@"],b=x._||(x._=function(){}),A=x.DBG,O=+new Date;if(b.y=b.y||O,j||A&&(A.y=O),(C=x["#"])||(C=x["#"]=String.random(9)),!l&&h(C),x.put&&(x.err||(m.s[C]||"").err))return!1;if(!x["##"]&&p!==x.put&&!b.via&&r){u.hash(x,j);return}if(!j&&r&&(j=(E=m.s[r])&&(E.via||(E=E.it)&&(E=E._)&&E.via)||(E=u.last)&&r===E["#"]&&u.leap),!j&&r)return m.s[r]?void 0:(console.STAT&&console.STAT(+new Date,++e,"total no peer to ack to"),!1);if(!j&&u.way)return u.way(x);if(A&&(A.yh=+new Date),!(y=b.raw)){u.raw(x,j);return}if(A&&(A.yr=+new Date),!j||!j.id){if(!Object.plain(j||i.peers))return!1;var O=+new Date;i.puff;var D=i.peers,T=Object.keys(j||i.peers||{});console.STAT&&console.STAT(O,+new Date-O,"peer keys"),function I(){var U=+new Date;l=1;var J=b.raw;b.raw=y;for(var R=0,K;R<9&&(K=(T||"")[R++]);)!(K=D[K])||u.say(x,K);b.raw=J,l=0,T=T.slice(R),console.STAT&&console.STAT(U,+new Date-U,"say loop"),T.length&&(g(I,0),r&&h(r))}();return}if(!j.wire&&u.wire&&u.wire(j),C!==j.last){if(j.last=C,j===b.via||(E=b.yo)&&(E[j.url]||E[j.pid]||E[j.id]))return!1;if(console.STAT&&console.STAT(O,((A||b).yp=+new Date)-(b.y||O),"say prep"),!l&&r&&h(r),j.batch){if(j.tail=(E=j.tail||0)+y.length,j.tail<=i.pack){j.batch+=(E?",":"")+y;return}k(j)}j.batch="[";var G=+new Date;setTimeout(function(){console.STAT&&console.STAT(G,+new Date-G,"0ms TO"),k(j)},i.gap),o(y,j),console.STAT&&r===j.SI&&console.STAT(O,+new Date-j.SH,"say ack")}},u.say.c=u.say.d=0,u.raw=function(x,j){if(!x)return"";var E=x._||{},C,y;if(y=E.raw)return y;if(typeof x=="string")return x;var r=x["##"],b=x["@"];if(r&&b){if(!E.via&&c(b+r))return!1;if((y=(m.s[b]||"").it)||(y=u.last)&&b===y["#"]){if(r===y["##"])return!1;y["##"]||(y["##"]=r)}}if(!x.dam){var A=0,O=[];y=i.peers;for(var D in y){var T=y[D];if(O.push(T.url||T.pid||T.id),++A>6)break}A>1&&(x["><"]=O.join())}if(C=E.$put){y={},Object.keys(x).forEach(function(N){y[N]=x[N]}),y.put=":])([:",f(y,function(N,I){if(!N){var U=+new Date;y=I.indexOf('"put":":])([:"'),G(p,I=I.slice(0,y+6)+C+I.slice(y+14)),console.STAT&&console.STAT(U,+new Date-U,"say slice")}});return}f(x,G);function G(N,I){N||(E.raw=I,u.say(x,j))}}}();function k(e){var l=e.batch,_=typeof l=="string";if(_&&(l+="]"),e.batch=e.tail=null,!!l&&!(_?3>l.length:!l.length)){if(!_)try{l=l.length===1?l[0]:JSON.stringify(l)}catch(S){return i.log("DAM JSON stringify error",S)}!l||o(l,e)}}function o(e,l){try{var _=l.wire;l.say?l.say(e):_.send&&_.send(e),u.say.d+=e.length||0,++u.say.c}catch{(l.queue=l.queue||[]).push(e)}}u.hi=function(e){var l=e.wire,_;if(!l){u.wire(e.length&&{url:e}||e);return}e.id?i.peers[e.url||e.id]=e:(_=e.id=e.id||String.random(9),u.say({dam:"?",pid:n.opt.pid},i.peers[_]=e),delete m.s[e.last]),e.met=e.met||+new Date,l.hied||n.on(l.hied="hi",e),_=e.queue,e.queue=[],setTimeout.each(_||[],function(S){o(S,e)},0,9)},u.bye=function(e){n.on("bye",e);var l=+new Date;l=l-(e.met||l),u.bye.time=((u.bye.time||l)+l)/2},u.hear["!"]=function(e,l){i.log("Error:",e.err)},u.hear["?"]=function(e,l){e.pid&&(l.pid||(l.pid=e.pid),e["@"])||(u.say({dam:"?",pid:i.pid,"@":e["#"]},l),delete m.s[l.last])},n.on("create",function(e){e.opt.pid=e.opt.pid||String.random(9),this.to.next(e),e.on("out",u.say)}),n.on("bye",function(e,l){e=i.peers[e.id||e]||e,this.to.next(e),e.bye?e.bye():(l=e.wire)&&l.close&&l.close(),delete i.peers[e.id],e.wire=null});var s={};return n.on("bye",function(e,l){this.to.next(e),(l=console.STAT)&&(l.peers=(l.peers||0)-1),(l=e.url)&&(s[l]=!0,setTimeout(function(){delete s[l]},i.lack||9e3))}),n.on("hi",function(e,l){this.to.next(e),(l=console.STAT)&&(l.peers=(l.peers||0)+1),!(!(l=e.url)||!s[l])&&(delete s[l],!i.super&&setTimeout.each(Object.keys(n.next),function(_){n.next[_],l={},l[_]=n.graph[_],l=String.hash(l),u.say({"##":l,get:{"#":_}},e)}))}),u}var p;try{B.exports=d}catch{}})(w,"./mesh"),w(function(B){var t=w("../index");t.Mesh=w("./mesh"),t.on("opt",function(f){if(this.to.next(f),f.once)return;var d=f.opt;if(d.WebSocket===!1)return;var p=t.window||{},n=d.WebSocket||p.WebSocket||p.webkitWebSocket||p.mozWebSocket;if(!n)return;d.WebSocket=n;var u=d.mesh=d.mesh||t.Mesh(f);u.wire||d.wire,u.wire=d.wire=i;function i(h){try{if(!h||!h.url)return k&&k(h);var v=h.url.replace(/^http/,"ws"),k=h.wire=new d.WebSocket(v);return k.onclose=function(){d.mesh.bye(h),m(h)},k.onerror=function(o){m(h)},k.onopen=function(){d.mesh.hi(h)},k.onmessage=function(o){!o||d.mesh.hear(o.data||o,h)},k}catch{}}setTimeout(function(){!d.super&&f.on("out",{dam:"hi"})},1);var g=2*999;function m(h){clearTimeout(h.defer),d.peers[h.url]&&(c&&h.retry<=0||(h.retry=(h.retry||d.retry+1||60)-(-h.tried+(h.tried=+new Date)<g*4?1:0),h.defer=setTimeout(function v(){if(c&&c.hidden)return setTimeout(v,g);i(h)},g)))}var c=""+a!=typeof document&&document});var a})(w,"./websocket"),w(function(B){if(typeof Gun!="undefined"){var t=function(){},a;try{a=(Gun.window||t).localStorage}catch{}a||(Gun.log("Warning: No localStorage exists to persist data to!"),a={setItem:function(d,p){this[d]=p},removeItem:function(d){delete this[d]},getItem:function(d){return this[d]}});var f=JSON.stringifyAsync||function(d,p,n,u){var i;try{p(i,JSON.stringify(d,n,u))}catch(g){p(g)}};Gun.on("create",function d(p){this.to.next(p);var n=p.opt;p.graph;var u=[],i,g,m,c;if(n.localStorage===!1)return;n.prefix=n.file||"gun/";try{i=d[n.prefix]=d[n.prefix]||JSON.parse(m=a.getItem(n.prefix))||{}}catch{i=d[n.prefix]={}}m=(m||"").length,p.on("get",function(v){this.to.next(v);var k=v.get,o,s,e,l;!k||!(o=k["#"])||(s=i[o]||l,s&&(e=k["."])&&!Object.plain(e)&&(s=Gun.state.ify({},e,Gun.state.is(s,e),s[e],o)),Gun.on.get.ack(v,s))}),p.on("put",function(v){this.to.next(v);var k=v.put,o=k["#"],s=k["."],e=v["#"];if(i[o]=Gun.state.ify(i[o],s,k[">"],k[":"],o),c&&m>4999880){p.on("in",{"@":e,err:"localStorage max!"});return}v["@"]||u.push(e),!g&&(g=setTimeout(h,9+m/333))});function h(){if(!u.length&&((setTimeout.turn||"").s||"").length){setTimeout(h,99);return}var v=u;clearTimeout(g),g=!1,u=[],f(i,function(k,o){try{!k&&a.setItem(n.prefix,o)}catch(s){k=c=s||"localStorage failure"}k&&(Gun.log(k+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),p.on("localStorage:error",{err:k,get:n.prefix,put:i})),m=o.length,!(!k&&!Object.empty(n.peers))&&setTimeout.each(v,function(s){p.on("in",{"@":s,err:k,ok:0})},0,99)})}})}})(w,"./localStorage")})(),function(){var C;if(""+C!=typeof Gun){var w=function(y){console.warn("Warning! Deprecated internal utility will break in next version:",y)},$=Gun;$.fn=$.fn||{is:function(y){return w("fn"),!!y&&typeof y=="function"}},$.bi=$.bi||{is:function(y){return w("bi"),y instanceof Boolean||typeof y=="boolean"}},$.num=$.num||{is:function(y){return w("num"),!B(y)&&(y-parseFloat(y)+1>=0||y===1/0||y===-1/0)}},$.text=$.text||{is:function(y){return w("text"),typeof y=="string"}},$.text.ify=$.text.ify||function(y){return w("text.ify"),$.text.is(y)?y:typeof JSON!="undefined"?JSON.stringify(y):y&&y.toString?y.toString():y},$.text.random=$.text.random||function(y,r){w("text.random");var b="";for(y=y||24,r=r||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";y>0;)b+=r.charAt(Math.floor(Math.random()*r.length)),y--;return b},$.text.match=$.text.match||function(y,r){var b,A;return w("text.match"),typeof y!="string"?!1:(typeof r=="string"&&(r={"=":r}),r=r||{},b=r["="]||r["*"]||r[">"]||r["<"],y===b?!0:A!==r["="]?!1:(b=r["*"]||r[">"]||r["<"],y.slice(0,(b||"").length)===b?!0:A!==r["*"]?!1:A!==r[">"]&&A!==r["<"]?y>=r[">"]&&y<=r["<"]:A!==r[">"]&&y>=r[">"]||A!==r["<"]&&y<=r["<"]))},$.text.hash=$.text.hash||function(y,r){if(w("text.hash"),typeof y=="string"){if(r=r||0,!y.length)return r;for(var b=0,A=y.length,O;b<A;++b)O=y.charCodeAt(b),r=(r<<5)-r+O,r|=0;return r}},$.list=$.list||{is:function(y){return w("list"),y instanceof Array}},$.list.slit=$.list.slit||Array.prototype.slice,$.list.sort=$.list.sort||function(y){return w("list.sort"),function(r,b){return!r||!b?0:(r=r[y],b=b[y],r<b?-1:r>b?1:0)}},$.list.map=$.list.map||function(y,r,b){return w("list.map"),j(y,r,b)},$.list.index=1,$.obj=$.boj||{is:function(y){return w("obj"),y?y instanceof Object&&y.constructor===Object||Object.prototype.toString.call(y).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},$.obj.put=$.obj.put||function(y,r,b){return w("obj.put"),(y||{})[r]=b,y},$.obj.has=$.obj.has||function(y,r){return w("obj.has"),y&&Object.prototype.hasOwnProperty.call(y,r)},$.obj.del=$.obj.del||function(y,r){if(w("obj.del"),!!y)return y[r]=null,delete y[r],y},$.obj.as=$.obj.as||function(y,r,b,A){return w("obj.as"),y[r]=y[r]||(A===b?{}:b)},$.obj.ify=$.obj.ify||function(y){if(w("obj.ify"),e(y))return y;try{y=JSON.parse(y)}catch{y={}}return y},function(){var y;function r(b,A){_(this,A)&&y!==this[A]||(this[A]=b)}$.obj.to=$.obj.to||function(b,A){return w("obj.to"),A=A||{},j(b,r,A),A}}(),$.obj.copy=$.obj.copy||function(y){return w("obj.copy"),y&&JSON.parse(JSON.stringify(y))},function(){function y(r,b){var A=this.n,O;if(!(A&&(b===A||e(A)&&_(A,b)))&&O!==b)return!0}$.obj.empty=$.obj.empty||function(r,b){return w("obj.empty"),r?!j(r,y,{n:b}):!0}}(),function(){function y(A,O){if(arguments.length===2){y.r=y.r||{},y.r[A]=O;return}y.r=y.r||[],y.r.push(A)}var r=Object.keys,b;Object.keys=Object.keys||function(A){return b(A,function(O,D,T){T(D)})},$.obj.map=b=$.obj.map||function(A,O,D){w("obj.map");var T,G=0,N,I,U,J,R=typeof O=="function";if(y.r=T,r&&e(A)&&(U=r(A),J=!0),D=D||{},B(A)||U)for(N=(U||A).length;G<N;G++){var K=G+$.list.index;if(R){if(I=J?O.call(D,A[U[G]],U[G],y):O.call(D,A[G],K,y),I!==T)return I}else if(O===A[J?U[G]:G])return U?U[G]:K}else for(G in A)if(R){if(_(A,G)&&(I=D?O.call(D,A[G],G,y):O(A[G],G,y),I!==T))return I}else if(O===A[G])return G;return R?y.r:$.list.index?0:-1}}(),$.time=$.time||{},$.time.is=$.time.is||function(y){return w("time"),y?y instanceof Date:+new Date().getTime()};var o=$.fn.is,B=$.list.is,s=$.obj,e=s.is,_=s.has,j=s.map,t={};t.is=function(y){return w("val.is"),y===C?!1:y===null?!0:y===1/0?!1:d(y)||f(y)||c(y)?!0:t.link.is(y)||!1},t.link=t.rel={_:"#"},function(){t.link.is=function(r){if(w("val.link.is"),r&&r[a]&&!r._&&e(r)){var b={};if(j(r,y,b),b.id)return b.id}return!1};function y(r,b){var A=this;if(A.id)return A.id=!1;if(b==a&&d(r))A.id=r;else return A.id=!1}}(),t.link.ify=function(y){return w("val.link.ify"),x({},a,y)},$.obj.has._=".";var a=t.link._,C,f=$.bi.is,c=$.num.is,d=$.text.is,s=$.obj,e=s.is,x=s.put,j=s.map;$.val=$.val||t;var p={_:"_"};p.soul=function(y,r){return w("node.soul"),y&&y._&&y._[r||i]},p.soul.ify=function(y,r){return w("node.soul.ify"),r=typeof r=="string"?{soul:r}:r||{},y=y||{},y._=y._||{},y._[i]=r.soul||y._[i]||u(),y},p.soul._=t.link._,function(){p.is=function(r,b,A){w("node.is");var O;return e(r)&&(O=p.soul(r))?!j(r,y,{as:A,cb:b,s:O,n:r}):!1};function y(r,b){if(b!==p._){if(!t.is(r))return!0;this.cb&&this.cb.call(this.as,r,b,this.n,this.s)}}}(),function(){p.ify=function(r,b,A){return w("node.ify"),b?typeof b=="string"?b={soul:b}:typeof b=="function"&&(b={map:b}):b={},b.map&&(b.node=b.map.call(A,r,C,b.node||{})),(b.node=p.soul.ify(b.node||{},b))&&j(r,y,{o:b,as:A}),b.node};function y(r,b){var A=this.o,O,D;if(A.map){O=A.map.call(this.as,r,""+b,A.node),D===O?l(A.node,b):A.node&&(A.node[b]=O);return}t.is(r)&&(A.node[b]=r)}}();var s=$.obj,e=s.is,l=s.del,j=s.map,n=$.text,u=n.random,i=p.soul._,C;$.node=$.node||p;var g=$.state;g.lex=function(){return w("state.lex"),g().toString(36).replace(".","")},g.to=function(y,r,b){w("state.to");var A=(y||{})[r];return e(A)&&(A=E(A)),g.ify(b,r,g.is(y,r),A,p.soul(y))},function(){g.map=function(r,b,A){w("state.map");var O,D=e(D=r||b)?D:null;return r=o(r=r||b)?r:null,D&&!r?(b=c(b)?b:g(),D[v]=D[v]||{},j(D,y,{o:D,s:b}),D):(A=A||e(b)?b:O,b=c(b)?b:g(),function(T,G,N,I){if(!r)return y.call({o:N,s:b},T,G),T;r.call(A||this||{},T,G,N,I),!(_(N,G)&&O===N[G])&&y.call({o:N,s:b},T,G)})};function y(r,b){v!==b&&g.ify(this.o,b,this.s)}}();var s=$.obj;s.as;var _=s.has,e=s.is,j=s.map,E=s.copy,m=$.num,c=m.is,h=$.fn,o=h.is,v=p._,C,k={};(function(){k.is=function(b,A,O,D){return w("graph.is"),!b||!e(b)||S(b)?!1:!j(b,y,{cb:A,fn:O,as:D})};function y(b,A){if(!b||A!==p.soul(b)||!p.is(b,this.fn,this.as))return!0;!this.cb||(r.n=b,r.as=this.as,this.cb.call(r.as,b,A,r))}function r(b){b&&p.is(r.n,b,r.as)}})(),function(){k.ify=function(D,T,G){w("graph.ify");var N={path:[],obj:D};return T?typeof T=="string"?T={soul:T}:typeof T=="function"&&(T.map=T):T={},typeof G=="string"&&(T.soul=T.soul||G,G=C),T.soul&&(N.link=t.link.ify(T.soul)),T.shell=(G||{}).shell,T.graph=T.graph||{},T.seen=T.seen||[],T.as=T.as||G,y(T,N),T.root=N.node,T.graph};function y(D,T){var G;return(G=O(D,T))?G:(T.env=D,T.soul=b,p.ify(T.obj,r,T)&&(T.link=T.link||t.link.ify(p.soul(T.node)),T.obj!==D.shell&&(D.graph[t.link.is(T.link)]=T.node)),T)}function r(D,T,G){var N=this,I=N.env,U,J;if(p._===T&&_(D,t.link._))return G._;if(!!(U=A(D,T,G,N,I))){if(T||(N.node=N.node||G||{},_(D,p._)&&p.soul(D)&&(N.node._=E(D._)),N.node=p.soul.ify(N.node,t.link.is(N.link)),N.link=N.link||t.link.ify(p.soul(N.node))),(J=I.map)&&(J.call(I.as||{},D,T,G,N),_(G,T))){if(D=G[T],C===D){l(G,T);return}if(!(U=A(D,T,G,N,I)))return}if(!T)return N.node;if(U===!0)return D;if(J=y(I,{obj:D,path:N.path.concat(T)}),!!J.node)return J.link}}function b(D){var T=this,G=t.link.is(T.link),N=T.env.graph;T.link=T.link||t.link.ify(D),T.link[t.link._]=D,T.node&&T.node[p._]&&(T.node[p._][t.link._]=D),_(N,G)&&(N[D]=N[G],l(N,G))}function A(D,T,G,N,I){var U;if(t.is(D))return!0;if(e(D))return 1;if(U=I.invalid)return D=U.call(I.as||{},D,T,G),A(D,T,G,N,I);I.err="Invalid value at '"+N.path.concat(T).join(".")+"'!",$.list.is(D)&&(I.err+=" Use `.set(item)` instead of an Array.")}function O(D,T){for(var G=D.seen,N=G.length,I;N--;)if(I=G[N],T.obj===I.obj)return I;G.push(T)}}(),k.node=function(y){w("graph.node");var r=p.soul(y);if(!!r)return x({},r,y)},function(){k.to=function(r,b,A){if(w("graph.to"),!!r){var O={};return A=A||{seen:{}},j(r[b],y,{obj:O,graph:r,opt:A}),O}};function y(r,b){var A,O;if(p._===b){if(S(r,t.link._))return;this.obj[b]=E(r);return}if(!(A=t.link.is(r))){this.obj[b]=r;return}if(O=this.opt.seen[A]){this.obj[b]=O;return}this.obj[b]=this.opt.seen[A]=k.to(this.graph,A,this.opt)}}();var o=$.fn.is,s=$.obj,e=s.is,l=s.del,_=s.has,S=s.empty,x=s.put,j=s.map,E=s.copy,C;$.graph=$.graph||k}}()})(ut);var lt=ut.exports,ht={exports:{}};(function(P){(function(){function w(B,t){return t?ot(B):B.slice?w[a(B)]:function(f,d){B(f={exports:{}}),w[a(d)]=f.exports};function a(f){return f.split("/").slice(-1).toString().replace(".js","")}}var $=P;w(function(B){typeof window!="undefined"&&(B.window=window);var t=B.window||B,a,f=t.SEA||{};(f.window=B.window)&&(f.window.SEA=f);try{a+""!=typeof $&&($.exports=f)}catch{}B.exports=f})(w,"./root"),w(function(B){var t=w("./root");try{t.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(w,"./https"),w(function(B){var t;if(t+""==typeof btoa){if(t+""==typeof Buffer)try{Y.Buffer=w("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}Y.btoa=function(a){return Buffer.from(a,"binary").toString("base64")},Y.atob=function(a){return Buffer.from(a,"base64").toString("binary")}}})(w,"./base64"),w(function(B){w("./base64");function t(){}Object.assign(t,{from:Array.from}),t.prototype=Object.create(Array.prototype),t.prototype.toString=function(a,f,d){a=a||"utf8",f=f||0;const p=this.length;if(a==="hex"){const n=new Uint8Array(this);return[...Array((d&&d+1||p)-f).keys()].map(u=>n[u+f].toString(16).padStart(2,"0")).join("")}if(a==="utf8")return Array.from({length:(d||p)-f},(n,u)=>String.fromCharCode(this[u+f])).join("");if(a==="base64")return btoa(this)},B.exports=t})(w,"./array"),w(function(B){w("./base64");var t=w("./array");function a(...f){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),a.from(...f)}a.prototype=Object.create(Array.prototype),Object.assign(a,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const f=arguments[0];let d;if(typeof f=="string"){const n=arguments[1]||"utf8";if(n==="hex"){const u=f.match(/([\da-fA-F]{2})/g).map(i=>parseInt(i,16));if(!u||!u.length)throw new TypeError("Invalid first argument for type 'hex'.");d=t.from(u)}else if(n==="utf8"||n==="binary"){const u=f.length,i=new Uint16Array(u);Array.from({length:u},(g,m)=>i[m]=f.charCodeAt(m)),d=t.from(i)}else if(n==="base64"){const u=atob(f),i=u.length,g=new Uint8Array(i);Array.from({length:i},(m,c)=>g[c]=u.charCodeAt(c)),d=t.from(g)}else n==="binary"?d=t.from(f):console.info("SafeBuffer.from unknown encoding: "+n);return d}if(f.byteLength,f.byteLength?f.byteLength:f.length){let n;return f instanceof ArrayBuffer&&(n=new Uint8Array(f)),t.from(n||f)}},alloc(f,d=0){return t.from(new Uint8Array(Array.from({length:f},()=>d)))},allocUnsafe(f){return t.from(new Uint8Array(Array.from({length:f})))},concat(f){if(!Array.isArray(f))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return t.from(f.reduce((d,p)=>d.concat(Array.from(p)),[]))}}),a.prototype.from=a.from,a.prototype.toString=t.prototype.toString,B.exports=a})(w,"./buffer"),w(function(B){const t=w("./root"),a={Buffer:w("./buffer")};var f={},d;if(JSON.parseAsync=JSON.parseAsync||function(n,u,i){var g;try{u(g,JSON.parse(n,i))}catch(m){u(m)}},JSON.stringifyAsync=JSON.stringifyAsync||function(n,u,i,g){var m;try{u(m,JSON.stringify(n,i,g))}catch(c){u(c)}},a.parse=function(n,u){return new Promise(function(i,g){JSON.parseAsync(n,function(m,c){m?g(m):i(c)},u)})},a.stringify=function(n,u,i){return new Promise(function(g,m){JSON.stringifyAsync(n,function(c,h){c?m(c):g(h)},u,i)})},t.window&&(a.crypto=window.crypto||window.msCrypto,a.subtle=(a.crypto||f).subtle||(a.crypto||f).webkitSubtle,a.TextEncoder=window.TextEncoder,a.TextDecoder=window.TextDecoder,a.random=n=>a.Buffer.from(a.crypto.getRandomValues(new Uint8Array(a.Buffer.alloc(n))))),!a.TextDecoder){const{TextEncoder:n,TextDecoder:u}=w((d+""==typeof $?".":"")+"./lib/text-encoding",1);a.TextDecoder=u,a.TextEncoder=n}if(!a.crypto)try{var p=w("crypto",1);Object.assign(a,{crypto:p,random:u=>a.Buffer.from(p.randomBytes(u))});const{Crypto:n}=w("@peculiar/webcrypto",1);a.ossl=a.subtle=new n({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}B.exports=a})(w,"./shim"),w(function(B){var t=w("./root"),a=w("./shim"),f={};f.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},f.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},f.ecdh={name:"ECDH",namedCurve:"P-256"},f.jwk=function(d,p){d=d.split(".");var n=d[0],u=d[1],i={kty:"EC",crv:"P-256",x:n,y:u,ext:!0};return i.key_ops=p?["sign"]:["verify"],p&&(i.d=p),i},f.keyToJwk=function(d){const n=d.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:n,ext:!1,alg:"A256GCM"}},f.recall={validity:12*60*60,hook:function(d){return d}},f.check=function(d){return typeof d=="string"&&d.slice(0,4)==="SEA{"},f.parse=async function(p){try{var n=typeof p=="string";return n&&p.slice(0,4)==="SEA{"&&(p=p.slice(3)),n?await a.parse(p):p}catch{}return p},t.opt=f,B.exports=f})(w,"./settings"),w(function(B){var t=w("./shim");B.exports=async function(a,f){var d=typeof a=="string"?a:await t.stringify(a),p=await t.subtle.digest({name:f||"SHA-256"},new t.TextEncoder().encode(d));return t.Buffer.from(p)}})(w,"./sha256"),w(function(B){const t=w("./shim"),a=t.subtle,f=t.ossl?t.ossl:a,d=p=>f.digest({name:"SHA-1"},new ArrayBuffer(p));B.exports=d})(w,"./sha1"),w(function(B){var t=w("./root"),a=w("./shim"),f=w("./settings"),d=w("./sha256"),p;t.work=t.work||(async(n,u,i,g)=>{try{var m=(u||{}).epub||u;if(g=g||{},m instanceof Function&&(i=m,m=p),n=typeof n=="string"?n:await a.stringify(n),(g.name||"").toLowerCase().slice(0,3)==="sha"){var c=a.Buffer.from(await d(n,g.name),"binary").toString(g.encode||"base64");if(i)try{i(c)}catch(o){console.log(o)}return c}m=m||a.random(9);var h=await(a.ossl||a.subtle).importKey("raw",new a.TextEncoder().encode(n),{name:g.name||"PBKDF2"},!1,["deriveBits"]),v=await(a.ossl||a.subtle).deriveBits({name:g.name||"PBKDF2",iterations:g.iterations||f.pbkdf2.iter,salt:new a.TextEncoder().encode(g.salt||m),hash:g.hash||f.pbkdf2.hash},h,g.length||f.pbkdf2.ks*8);n=a.random(n.length);var k=a.Buffer.from(v,"binary").toString(g.encode||"base64");if(i)try{i(k)}catch(o){console.log(o)}return k}catch(o){if(console.log(o),t.err=o,t.throw)throw o;i&&i();return}}),B.exports=t.work})(w,"./work"),w(function(B){var t=w("./root"),a=w("./shim");w("./settings"),t.name=t.name||(async(f,d)=>{try{if(f)try{f()}catch(p){console.log(p)}return}catch(p){if(console.log(p),t.err=p,t.throw)throw p;f&&f();return}}),t.pair=t.pair||(async(f,d)=>{try{var p=a.ossl||a.subtle,n=await a.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async g=>{var m={};m.priv=(await a.subtle.exportKey("jwk",g.privateKey)).d;var c=await a.subtle.exportKey("jwk",g.publicKey);return m.pub=c.x+"."+c.y,m});try{var u=await p.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async g=>{var m={};m.epriv=(await p.exportKey("jwk",g.privateKey)).d;var c=await p.exportKey("jwk",g.publicKey);return m.epub=c.x+"."+c.y,m})}catch(g){if(t.window)throw g;if(g=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw g}u=u||{};var i={pub:n.pub,priv:n.priv,epub:u.epub,epriv:u.epriv};if(f)try{f(i)}catch(g){console.log(g)}return i}catch(g){if(console.log(g),t.err=g,t.throw)throw g;f&&f();return}}),B.exports=t.pair})(w,"./pair"),w(function(B){var t=w("./root"),a=w("./shim"),f=w("./settings"),d=w("./sha256"),p;t.sign=t.sign||(async(n,u,i,g)=>{try{if(g=g||{},!(u||g).priv){if(!t.I)throw"No signing key.";u=await t.I(null,{what:n,how:"sign",why:g.why})}if(p===n)throw"`undefined` not allowed.";var m=await f.parse(n),c=g.check=g.check||m;if(t.verify&&(t.opt.check(c)||c&&c.s&&c.m)&&p!==await t.verify(c,u)){var e=await f.parse(c);if(g.raw||(e="SEA"+await a.stringify(e)),i)try{i(e)}catch(_){console.log(_)}return e}var h=u.pub,v=u.priv,k=f.jwk(h,v),o=await d(m),s=await(a.ossl||a.subtle).importKey("jwk",k,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(l=>(a.ossl||a.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},l,new Uint8Array(o))),e={m,s:a.Buffer.from(s,"binary").toString(g.encode||"base64")};if(g.raw||(e="SEA"+await a.stringify(e)),i)try{i(e)}catch(l){console.log(l)}return e}catch(l){if(console.log(l),t.err=l,t.throw)throw l;i&&i();return}}),B.exports=t.sign})(w,"./sign"),w(function(B){var t=w("./root"),a=w("./shim"),f=w("./settings"),d=w("./sha256"),p;t.verify=t.verify||(async(i,g,m,c)=>{try{var h=await f.parse(i);if(g===!1){var v=await f.parse(h.m);if(m)try{m(v)}catch(j){console.log(j)}return v}c=c||{};var k=g.pub||g,o=t.opt.slow_leak?await t.opt.slow_leak(k):await(a.ossl||a.subtle).importKey("jwk",f.jwk(k),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),s=await d(h.m),e,l,_,S;try{if(e=a.Buffer.from(h.s,c.encode||"base64"),l=new Uint8Array(e),_=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},o,l,new Uint8Array(s)),!_)throw"Signature did not match."}catch{if(t.opt.fallback)return await t.opt.fall_verify(i,g,m,c)}var x=_?await f.parse(h.m):p;if(m)try{m(x)}catch(j){console.log(j)}return x}catch(j){if(console.log(j),t.err=j,t.throw)throw j;m&&m();return}}),B.exports=t.verify;var n={};t.opt.slow_leak=i=>{if(n[i])return n[i];var g=f.jwk(i);return n[i]=(a.ossl||a.subtle).importKey("jwk",g,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),n[i]};var u=t.opt;t.opt.fall_verify=async function(i,g,m,c,h){if(h===t.opt.fallback)throw"Signature did not match";h=h||1;var v=i||"";i=t.opt.unpack(i)||i;var k=await f.parse(i),o=g.pub||g,s=await t.opt.slow_leak(o),e=h<=t.opt.fallback?a.Buffer.from(await a.subtle.digest({name:"SHA-256"},new a.TextEncoder().encode(await f.parse(k.m)))):await d(k.m),l,_,S;try{if(l=a.Buffer.from(k.s,c.encode||"base64"),_=new Uint8Array(l),S=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},s,_,new Uint8Array(e)),!S)throw"Signature did not match."}catch{try{l=a.Buffer.from(k.s,"utf8"),_=new Uint8Array(l),S=await(a.ossl||a.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},s,_,new Uint8Array(e))}catch{if(!S)throw"Signature did not match."}}var x=S?await f.parse(k.m):p;if(u.fall_soul=v["#"],u.fall_key=v["."],u.fall_val=i,u.fall_state=v[">"],m)try{m(x)}catch(j){console.log(j)}return x},t.opt.fallback=2})(w,"./verify"),w(function(B){var t=w("./shim"),a=w("./settings"),f=w("./sha256");const d=async(p,n,u)=>{const i=p+(n||t.random(8)).toString("utf8"),g=t.Buffer.from(await f(i),"binary"),m=a.keyToJwk(g);return await t.subtle.importKey("jwk",m,{name:"AES-GCM"},!1,["encrypt","decrypt"])};B.exports=d})(w,"./aeskey"),w(function(B){var t=w("./root"),a=w("./shim");w("./settings");var f=w("./aeskey"),d;t.encrypt=t.encrypt||(async(p,n,u,i)=>{try{i=i||{};var g=(n||i).epriv||n;if(d===p)throw"`undefined` not allowed.";if(!g){if(!t.I)throw"No encryption key.";n=await t.I(null,{what:p,how:"encrypt",why:i.why}),g=n.epriv||n}var m=typeof p=="string"?p:await a.stringify(p),c={s:a.random(9),iv:a.random(15)},h=await f(g,c.s,i).then(k=>a.subtle.encrypt({name:i.name||"AES-GCM",iv:new Uint8Array(c.iv)},k,new a.TextEncoder().encode(m))),v={ct:a.Buffer.from(h,"binary").toString(i.encode||"base64"),iv:c.iv.toString(i.encode||"base64"),s:c.s.toString(i.encode||"base64")};if(i.raw||(v="SEA"+await a.stringify(v)),u)try{u(v)}catch(k){console.log(k)}return v}catch(k){if(console.log(k),t.err=k,t.throw)throw k;u&&u();return}}),B.exports=t.encrypt})(w,"./encrypt"),w(function(B){var t=w("./root"),a=w("./shim"),f=w("./settings"),d=w("./aeskey");t.decrypt=t.decrypt||(async(p,n,u,i)=>{try{i=i||{};var g=(n||i).epriv||n;if(!g){if(!t.I)throw"No decryption key.";n=await t.I(null,{what:p,how:"decrypt",why:i.why}),g=n.epriv||n}var m=await f.parse(p),c,h,v;try{c=a.Buffer.from(m.s,i.encode||"base64"),h=a.Buffer.from(m.iv,i.encode||"base64"),v=a.Buffer.from(m.ct,i.encode||"base64");var k=await d(g,c,i).then(s=>a.subtle.decrypt({name:i.name||"AES-GCM",iv:new Uint8Array(h),tagLength:128},s,new Uint8Array(v)))}catch{if(i.encode==="utf8")throw"Could not decrypt";if(t.opt.fallback)return i.encode="utf8",await t.decrypt(p,n,u,i)}var o=await f.parse(new a.TextDecoder("utf8").decode(k));if(u)try{u(o)}catch(s){console.log(s)}return o}catch(s){if(console.log(s),t.err=s,t.throw)throw s;u&&u();return}}),B.exports=t.decrypt})(w,"./decrypt"),w(function(B){var t=w("./root"),a=w("./shim");w("./settings"),t.secret=t.secret||(async(d,p,n,u)=>{try{if(u=u||{},!p||!p.epriv||!p.epub){if(!t.I)throw"No secret mix.";p=await t.I(null,{what:d,how:"secret",why:u.why})}var i=d.epub||d,g=p.epub,m=p.epriv,c=a.ossl||a.subtle,h=f(i),v=Object.assign({public:await c.importKey(...h,!0,[])},{name:"ECDH",namedCurve:"P-256"}),k=f(g,m),o=await c.importKey(...k,!1,["deriveBits"]).then(async e=>{var l=await c.deriveBits(v,e,256),_=new Uint8Array(l),S=await c.importKey("raw",_,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return c.exportKey("jwk",S).then(({k:x})=>x)}),s=o;if(n)try{n(s)}catch(e){console.log(e)}return s}catch(e){if(console.log(e),t.err=e,t.throw)throw e;n&&n();return}});var f=(d,p)=>{var[n,u]=d.split("."),i=p?{d:p}:{};return["jwk",Object.assign(i,{x:n,y:u,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};B.exports=t.secret})(w,"./secret"),w(function(B){var t=w("./root");t.certify=t.certify||(async(a,f={},d,p,n={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),a=(()=>{var s=[];if(a){if((typeof a=="string"||Array.isArray(a))&&a.indexOf("*")>-1)return"*";if(typeof a=="string")return a;if(Array.isArray(a)){if(a.length===1&&a[0])return typeof a[0]=="object"&&a[0].pub?a[0].pub:typeof a[0]=="string"?a[0]:null;a.map(e=>{typeof e=="string"?s.push(e):typeof e=="object"&&e.pub&&s.push(e.pub)})}return typeof a=="object"&&a.pub?a.pub:s.length>0?s:null}})(),!a)return console.log("No certificant found.");const i=n.expiry&&(typeof n.expiry=="number"||typeof n.expiry=="string")?parseFloat(n.expiry):null,g=(f||{}).read?f.read:null,m=(f||{}).write?f.write:typeof f=="string"||Array.isArray(f)||f["+"]||f["#"]||f["."]||f["="]||f["*"]||f[">"]||f["<"]?f:null,c=(n||{}).block||(n||{}).blacklist||(n||{}).ban||{},h=c.read&&(typeof c.read=="string"||(c.read||{})["#"])?c.read:null,v=typeof c=="string"?c:c.write&&(typeof c.write=="string"||c.write["#"])?c.write:null;if(!g&&!m)return console.log("No policy found.");const k=JSON.stringify(W(W(W(W(W({c:a},i?{e:i}:{}),g?{r:g}:{}),m?{w:m}:{}),h?{rb:h}:{}),v?{wb:v}:{}));var u=await t.sign(k,d,null,{raw:1});if(n.raw||(u="SEA"+JSON.stringify(u)),p)try{p(u)}catch(s){console.log(s)}return u}catch(i){if(t.err=i,t.throw)throw i;p&&p();return}}),B.exports=t.certify})(w,"./certify"),w(function(B){var t=w("./shim"),a=w("./root");a.work=w("./work"),a.sign=w("./sign"),a.verify=w("./verify"),a.encrypt=w("./encrypt"),a.decrypt=w("./decrypt"),a.certify=w("./certify"),a.random=a.random||t.random,a.Buffer=a.Buffer||w("./buffer"),a.keyid=a.keyid||(async f=>{try{const d=t.Buffer.concat(f.replace(/-/g,"+").replace(/_/g,"/").split(".").map(i=>t.Buffer.from(i,"base64"))),p=t.Buffer.concat([t.Buffer.from([153,d.length/256,d.length%256]),d]),n=await sha1hash(p),u=t.Buffer.from(n,"binary");return u.toString("hex",u.length-8)}catch(d){throw console.log(d),d}}),((a.window||{}).GUN||{}).SEA=a,B.exports=a})(w,"./sea"),w(function(B){var t=w("./sea"),a,f;t.window?a=t.window.GUN||{chain:{}}:a=w((f+""==typeof $?".":"")+"./gun",1),t.GUN=a;function d(n){this._={$:this}}d.prototype=function(){function n(){}return n.prototype=a.chain,new n}(),d.prototype.constructor=d,a.chain.user=function(n){var u=this,g=u.back(-1),i;if(n)return n=t.opt.pub((n._||"")["#"])||n,g.get("~"+n);if(i=g.back("user"))return i;var g=g._,m=g,c=m.opt.uuid||p;return(m=(i=m.user=u.chain(new d))._).opt={},m.opt.uuid=function(h){var v=c(),k=g.user;return!k||!(k=k.is)||!(k=k.pub)||(v="~"+k+"/"+v,h&&h.call&&h(null,v)),v},i};function p(){return a.state().toString(36).replace(".","")}a.User=d,d.GUN=a,d.SEA=a.SEA=t,B.exports=d})(w,"./user"),w(function(B){var t,a=""+t!=typeof window?window.Gun||{chain:{}}:w((""+t==typeof $?".":"")+"./gun",1);a.chain.then=function(f,d){var p=this,n=new Promise(function(u,i){p.once(u,d)});return f?n.then(f):n}})(w,"./then"),w(function(B){var t=w("./user"),a=t.SEA,f=t.GUN,d=function(){};t.prototype.create=function(...p){var n=typeof p[0]=="object"&&(p[0].pub||p[0].epub)?p[0]:typeof p[1]=="object"&&(p[1].pub||p[1].epub)?p[1]:null,u=n&&(n.pub||n.epub)?n.pub:typeof p[0]=="string"?p[0]:null,i=n&&(n.pub||n.epub)?n:u&&typeof p[1]=="string"?p[1]:null,g=p.filter(s=>typeof s=="function")[0]||null,m=p&&p.length>1&&typeof p[p.length-1]=="object"?p[p.length-1]:{},c=this,h=c._,v=c.back(-1);if(g=g||d,m=m||{},m.check!==!1){var k;if(u||(k="No user."),(i||"").length<8&&(k="Password too short!"),k)return g({err:f.log(k)}),c}if(h.ing)return(g||d)({err:f.log("User is already being created or authenticated!"),wait:!0}),c;h.ing=!0;var o={};return o.a=function(s){if(o.pubs=s,s&&!m.already){var e={err:f.log("User already created!")};h.ing=!1,(g||d)(e),c.leave();return}o.salt=String.random(64),a.work(i,o.salt,o.b)},o.b=function(s){o.proof=s,n?o.c(n):a.pair(o.c)},o.c=function(s){var e;o.pair=s||{},(e=h.root.user)&&(e._.sea=s,e.is={pub:s.pub,epub:s.epub,alias:u}),o.data={pub:s.pub},o.d()},o.d=function(){o.data.alias=u,o.e()},o.e=function(){o.data.epub=o.pair.epub,a.encrypt({priv:o.pair.priv,epriv:o.pair.epriv},o.proof,o.f,{raw:1})},o.f=function(s){o.data.auth=JSON.stringify({ek:s,s:o.salt}),o.g(o.data.auth)},o.g=function(s){var e;o.data.auth=o.data.auth||s,v.get(e="~"+o.pair.pub).put(o.data).on(o.h);var l={};l[e]={"#":e},v.get("~@"+u).put(l).get(e).on(o.i)},o.h=function(s,e,l,_){_.off(),o.h.ok=1,o.i()},o.i=function(s,e,l,_){_&&(o.i.ok=1,_.off()),!(!o.h.ok||!o.i.ok)&&(h.ing=!1,g({ok:0,pub:o.pair.pub}),d===g&&(n?c.auth(n):c.auth(u,i)))},v.get("~@"+u).once(o.a),c},t.prototype.leave=function(p,n){var u=this,i=u.back(-1)._.user;if(i&&(delete i.is,delete i._.is,delete i._.sea),a.window)try{var g={};g=window.sessionStorage,delete g.recall,delete g.pair}catch{}return u}})(w,"./create"),w(function(B){var t=w("./user"),a=t.SEA,f=t.GUN,d=function(){};t.prototype.auth=function(...n){var u=typeof n[0]=="object"&&(n[0].pub||n[0].epub)?n[0]:typeof n[1]=="object"&&(n[1].pub||n[1].epub)?n[1]:null,i=!u&&typeof n[0]=="string"?n[0]:null,g=i&&typeof n[1]=="string"?n[1]:null,m=n.filter(e=>typeof e=="function")[0]||null,c=n&&n.length>1&&typeof n[n.length-1]=="object"?n[n.length-1]:{},h=this,v=h._,k=h.back(-1);if(v.ing)return(m||d)({err:f.log("User is already being created or authenticated!"),wait:!0}),h;v.ing=!0;var o={},s;return o.a=function(e){if(!e)return o.b();if(!e.pub){var l=[];return Object.keys(e).forEach(function(_){_!="_"&&l.push(e[_])}),o.b(l)}if(o.name)return o.f(e);o.c((o.data=e).auth)},o.b=function(e){var l=(o.list=(o.list||[]).concat(e||[])).shift();if(s===l)return o.name?o.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):o.err("Wrong user or password.");k.get(l).once(o.a)},o.c=function(e){if(s===e)return o.b();if(typeof e=="string")return o.c(p(e));a.work(g,(o.auth=e).s,o.d,o.enc)},o.d=function(e){a.decrypt(o.auth.ek,e,o.e,o.enc)},o.e=function(e){if(s===e)return o.enc?(o.enc=null,o.b()):(o.enc={encode:"utf8"},o.c(o.auth));o.half=e,o.f(o.data)},o.f=function(e){var l=o.half||{},_=o.data||{};o.g(o.lol={pub:e.pub||_.pub,epub:e.epub||_.epub,priv:e.priv||l.priv,epriv:e.epriv||l.epriv})},o.g=function(e){if(!e||!e.pub||!e.epub)return o.b();o.pair=e;var l=k._.user,_=l._;_.tag;var S=_.opt;_=l._=k.get("~"+e.pub)._,_.opt=S,l.is={pub:e.pub,epub:e.epub,alias:i||e.pub},_.sea=o.pair,v.ing=!1;try{g&&s==(p(v.root.graph["~"+e.pub].auth)||"")[":"]&&(c.shuffle=c.change=g)}catch{}if(c.change?o.z():(m||d)(_),a.window&&(h.back("user")._.opt||c).remember)try{var x={};x=window.sessionStorage,x.recall=!0,x.pair=JSON.stringify(e)}catch{}try{k._.tag.auth?k._.on("auth",_):setTimeout(function(){k._.on("auth",_)},1)}catch(j){f.log("Your 'auth' callback crashed with:",j)}},o.z=function(){o.salt=String.random(64),a.work(c.change,o.salt,o.y)},o.y=function(e){a.encrypt({priv:o.pair.priv,epriv:o.pair.epriv},e,o.x,{raw:1})},o.x=function(e){o.w(JSON.stringify({ek:e,s:o.salt}))},o.w=function(e){if(c.shuffle){console.log("migrate core account from UTF8 & shuffle");var l={};Object.keys(o.data).forEach(function(_){l[_]=o.data[_]}),delete l._,l.auth=e,k.get("~"+o.pair.pub).put(l)}k.get("~"+o.pair.pub).get("auth").put(e,m||d)},o.err=function(e){var l={err:f.log(e||"User cannot be found!")};v.ing=!1,(m||d)(l)},o.plugin=function(e){if(!(o.name=e))return o.err();var l=[e];e[0]!=="~"&&(l[1]="~"+e,l[2]="~@"+e),o.b(l)},u?o.g(u):i?k.get("~@"+i).once(o.a):!i&&!g&&a.name(o.plugin),h};function p(n){if(typeof n!="string")return n;try{n=JSON.parse(n)}catch{n={}}return n}})(w,"./auth"),w(function(B){var t=w("./user"),a=t.SEA;t.GUN,t.prototype.recall=function(f,d){var p=this,n=p.back(-1);if(f=f||{},f&&f.sessionStorage){if(a.window)try{var u={};u=window.sessionStorage,u&&(n._.opt.remember=!0,(p.back("user")._.opt||f).remember=!0,(u.recall||u.pair)&&n.user().auth(JSON.parse(u.pair),d))}catch{}return p}return p}})(w,"./recall"),w(function(B){var t=w("./user"),a=t.SEA,f=t.GUN,d=function(){};t.prototype.pair=function(){var p=this,n;try{n=new Proxy({DANGER:"\u2620"},{get:function(u,i,g){if(!(!p.is||!(p._||"").sea))return p._.sea[i]}})}catch{}return n},t.prototype.delete=async function(p,n,u){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var i=this;i.back(-1);var g=i.back("user");try{g.auth(p,n,function(m){var c=(g.is||{}).pub;g.map().once(function(){this.put(null)}),g.leave(),(u||d)({ok:0})})}catch(m){f.log("User.delete failed! Error:",m)}return i},t.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const p=this.back(-1);try{return await authRecall(p),p._.user._}catch{const u="No session!";throw f.log(u),{err:u}}},t.prototype.trust=async function(p){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),f.is(p)&&p.get("pub").get((n,u)=>{console.log(n,u)}),p.get("trust").get(path).put(theirPubkey)},t.prototype.grant=function(p,n){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var u=this,i=u.back(-1).user(),g=i._.sea,m="";return u.back(function(c){c.is||(m+=c.get||"")}),async function(){var c,h=await i.get("grant").get(g.pub).get(m).then();h=await a.decrypt(h,g),h||(h=a.random(16).toString(),c=await a.encrypt(h,g),i.get("grant").get(g.pub).get(m).put(c));var v=p.get("pub").then(),k=p.get("epub").then();v=await v,k=await k;var o=await a.secret(k,g);c=await a.encrypt(h,o),i.get("grant").get(v).get(m).put(c,n)}(),u},t.prototype.secret=function(p,n){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var u=this,i=u.back(-1).user(),g=i.pair(),m="";return u.back(function(c){c.is||(m+=c.get||"")}),async function(){var c,h=await i.get("trust").get(g.pub).get(m).then();h=await a.decrypt(h,g),h||(h=a.random(16).toString(),c=await a.encrypt(h,g),i.get("trust").get(g.pub).get(m).put(c)),c=await a.encrypt(p,h),u.put(c,n)}(),u},B.exports=t})(w,"./share"),w(function(B){var t=w("./sea"),a=w("./settings"),f=function(){},d,p=""+d!=typeof window?window.Gun||{on:f}:w((""+d==typeof $?".":"")+"./gun",1);p.on("opt",function(h){h.sea||(h.sea={own:{}},h.on("put",n,h)),this.to.next(h)});function n(h){var v=this,k=v.as,o=h.put,s=o["#"],e=o["."],l=o[":"],_=o[">"],S=h["#"],x;if(!(!s||!e)){if((h._||"").faith&&(k.opt||"").faith&&typeof h._=="function"){t.opt.pack(o,function(E){t.verify(E,!1,function(C){o["="]=t.opt.unpack(C),v.to.next(h)})});return}var j=function(E){k.on("in",{"@":S,err:h.err=E})};if((h._||"").DBG&&((h._||"").DBG.c=+new Date),0<=s.indexOf("<?")&&(x=parseFloat(s.split("<?")[1]||""),x&&_<p.state()-x*1e3)){(x=h._)&&x.stun&&x.stun--;return}if(s==="~@"){n.alias(v,h,l,e,s,k,j);return}if(s.slice(0,2)==="~@"){n.pubs(v,h,l,e,s,k,j);return}if(x=t.opt.pub(s)){n.pub(v,h,l,e,s,k,j,k.user||"",x);return}if(0<=s.indexOf("#")){n.hash(v,h,l,e,s,k,j);return}n.any(v,h,l,e,s,k,j,k.user||"")}}n.hash=function(h,v,k,o,s,e,l){t.work(k,null,function(_){if(_&&_===o.split("#").slice(-1)[0])return h.to.next(v);l("Data hash not same as hash!")},{name:"SHA-256"})},n.alias=function(h,v,k,o,s,e,l){if(!k)return l("Data must exist!");if("~@"+o===i(k))return h.to.next(v);l("Alias not same!")},n.pubs=function(h,v,k,o,s,e,l){if(!k)return l("Alias must exist!");if(o===i(k))return h.to.next(v);l("Alias not same!")},n.pub=async function(h,v,k,o,s,e,l,_,S){var x;const j=await a.parse(k)||{},E=(C,y,r)=>{if(C.m&&C.s&&y&&S)return t.verify(C,S,b=>{if(d!==b&&d!==b.e&&v.put[">"]&&v.put[">"]>parseFloat(b.e))return l("Certificate expired.");if(d!==b&&b.c&&b.w&&(b.c===y||b.c.indexOf("*")>-1)){let O=s.indexOf("/")>-1?s.replace(s.substring(0,s.indexOf("/")+1),""):"";String.match=String.match||p.text.match;const D=Array.isArray(b.w)?b.w:typeof b.w=="object"||typeof b.w=="string"?[b.w]:[];for(const T of D)if(String.match(O,T["#"])&&String.match(o,T["."])||!T["."]&&String.match(O,T["#"])||!T["#"]&&String.match(o,T["."])||String.match(O?O+"/"+o:o,T["#"]||T)){if(T["+"]&&T["+"].indexOf("*")>-1&&O&&O.indexOf(y)==-1&&o.indexOf(y)==-1)return l(`Path "${O}" or key "${o}" must contain string "${y}".`);if(b.wb&&(typeof b.wb=="string"||(b.wb||{})["#"])){var A=h.as.root.$.back(-1);return typeof b.wb=="string"&&b.wb.slice(0,1)!=="~"&&(A=A.get("~"+S)),A.get(b.wb).get(y).once(G=>G&&(G===1||G===!0)?l(`Certificant ${y} blocked.`):r(b))}return r(b)}return l("Certificate verification fail.")}})};if(o==="pub"&&"~"+S===s)return k===S?h.to.next(v):l("Account not same!");if((x=_.is)&&x.pub&&!j["*"]&&!j["+"]&&(S===x.pub||S!==x.pub&&((v._.msg||{}).opt||{}).cert)){t.opt.pack(v.put,C=>{t.sign(C,_._.sea,async function(y){if(d===y)return l(t.err||"Signature fail.");if(v.put[":"]={":":x=t.opt.unpack(y.m),"~":y.s},v.put["="]=x,S===_.is.pub){(x=i(k))&&((e.sea.own[x]=e.sea.own[x]||{})[S]=1),JSON.stringifyAsync(v.put[":"],function(r,b){return r?l(r||"Stringify error."):(v.put[":"]=b,h.to.next(v))});return}if(S!==_.is.pub&&((v._.msg||{}).opt||{}).cert){const r=await a.parse(v._.msg.opt.cert);r&&r.m&&r.s&&E(r,_.is.pub,b=>{v.put[":"]["+"]=r,v.put[":"]["*"]=_.is.pub,JSON.stringifyAsync(v.put[":"],function(A,O){return A?l(A||"Stringify error."):(v.put[":"]=O,h.to.next(v))})})}},{raw:1})});return}t.opt.pack(v.put,C=>{t.verify(C,j["*"]||S,function(y){var r;if(y=t.opt.unpack(y),d===y)return l("Unverified data.");if((r=i(y))&&S===t.opt.pub(r)&&((e.sea.own[r]=e.sea.own[r]||{})[S]=1),j["+"]&&j["+"].m&&j["+"].s&&j["*"])E(j["+"],j["*"],b=>(v.put["="]=y,h.to.next(v)));else return v.put["="]=y,h.to.next(v)})})},n.any=function(h,v,k,o,s,e,l,_){if(e.opt.secure)return l("Soul missing public key at '"+o+"'.");e.on("secure",function(S){if(this.off(),!e.opt.secure)return h.to.next(S);l("Data cannot be changed.")}).on.on("secure",v)};var u=p.valid,i=function(h,v){return typeof(v=u(h))=="string"&&v};(p.state||"").ify;var g=/[^\w_-]/;t.opt.pub=function(h){if(!!h&&(h=h.split("~"),!(!h||!(h=h[1]))&&(h=h.split(g).slice(0,2),!(!h||h.length!=2)&&(h[0]||"")[0]!=="@")))return h=h.slice(0,2).join("."),h},t.opt.stringy=function(h){},t.opt.pack=function(h,v,k,o,s){var e,l;if(t.opt.check(h))return v(h);h&&h["#"]&&h["."]&&h[">"]&&(e=h[":"],l=1),JSON.parseAsync(l?e:h,function(_,S){var x=d!==(S||"")[":"]&&(S||"")["~"];if(!x){v(h);return}v({m:{"#":s||h["#"],".":k||h["."],":":(S||"")[":"],">":h[">"]||p.state.is(o,k)},s:x})})};var m=t.opt;t.opt.unpack=function(h,v,k){var o;if(d!==h){if(h&&d!==(o=h[":"]))return o;if(v=v||m.fall_key,!k&&m.fall_val&&(k={},k[v]=m.fall_val),!(!v||!k)){if(h===k[v]||!t.opt.check(k[v]))return h;var s=k&&k._&&k._["#"]||m.fall_soul,e=p.state.is(k,v)||m.fall_state;if(h&&h.length===4&&s===h[0]&&v===h[1]&&c(e)===c(h[3]))return h[2];if(e<t.opt.shuffle_attack)return h}}},t.opt.shuffle_attack=15463296e5;var c=Math.floor})(w,"./index")})()})(ht);/*! js-cookie v3.0.1 | MIT */function V(P){for(var w=1;w<arguments.length;w++){var $=arguments[w];for(var B in $)P[B]=$[B]}return P}var pt={read:function(P){return P[0]==='"'&&(P=P.slice(1,-1)),P.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(P){return encodeURIComponent(P).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Q(P,w){function $(t,a,f){if(typeof document!="undefined"){f=V({},w,f),typeof f.expires=="number"&&(f.expires=new Date(Date.now()+f.expires*864e5)),f.expires&&(f.expires=f.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var p in f)!f[p]||(d+="; "+p,f[p]!==!0&&(d+="="+f[p].split(";")[0]));return document.cookie=t+"="+P.write(a,t)+d}}function B(t){if(!(typeof document=="undefined"||arguments.length&&!t)){for(var a=document.cookie?document.cookie.split("; "):[],f={},d=0;d<a.length;d++){var p=a[d].split("="),n=p.slice(1).join("=");try{var u=decodeURIComponent(p[0]);if(f[u]=P.read(n,u),t===u)break}catch{}}return t?f[t]:f}}return Object.create({set:$,get:B,remove:function(t,a){$(t,"",V({},a,{expires:-1}))},withAttributes:function(t){return Q(this.converter,V({},this.attributes,t))},withConverter:function(t){return Q(V({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(w)},converter:{value:Object.freeze(P)}})}var rt=Q(pt,{path:"/"});const X=lt({peers:["http://localhost:8080/gun"]}),it=X.user().recall({sessionStorage:!0}),yt=ct("");it.get("alias").on(P=>yt.set(P)),X.on("auth",async P=>{rt.set("u",sessionStorage.getItem("pair"),{expires:10});const w=await it.get("alias");console.log("signed in as",w)}),X.on("hi",()=>{const P=rt.get("u");(P==null?void 0:P.length)==0?console.log("not logged in"):(sessionStorage.setItem("recall","true"),sessionStorage.setItem("pair",P),sessionStorage.getItem("auth")||(window.location.reload(),sessionStorage.setItem("auth","true")))});export{rt as a,X as d,it as u};
