import{S as oe,i as ae,s as ce,e as V,t as q,c as D,a as j,h as H,d as k,g as U,J as v,j as se,k as B,m as J,b as y,E as le,K as fe,v as Le,L as x,M as Te,l as ie,w as _e,x as pe,y as me,q as we,o as ve,B as be,N as Z}from"./index-ec26513d.js";import{a as qe}from"./paths-c0fc83a9.js";import{w as He}from"./index-63348562.js";import{d as Ue}from"./user-b5e473cf.js";const K=["goat","horse","sloth"],Q=["tiger","bear","snake","mantis-shrimp","bird"];function W(t,e){return qe+"/tiles/"+t+"-"+e+".svg"}const ze=W("w","goat"),Ce=W("w","horse"),Pe=W("w","bird"),Re=W("w","sloth"),Ke=W("w","tiger"),Fe=W("w","bear"),Qe=W("w","snake"),Xe=W("w","mantis-shrimp"),Ye=W("o","goat"),Ze=W("o","horse"),$e=W("o","bird"),xe=W("o","sloth"),et=W("o","tiger"),tt=W("o","bear"),lt=W("o","snake"),it=W("o","mantis-shrimp"),st={w:{goat:ze,horse:Ce,bird:Pe,sloth:Re,tiger:Ke,bear:Fe,snake:Qe,"mantis-shrimp":Xe},o:{goat:Ye,horse:Ze,bird:$e,sloth:xe,tiger:et,bear:tt,snake:lt,"mantis-shrimp":it}};let ne,Ae;ne=He(JSON.parse(localStorage.getItem("log"))||[]),Ae=(...t)=>{ne.update(e=>{const i=e[e.length-1];return e.length==0||i.length==2?e.push([t.join(" ")]):(i==null?void 0:i.length)!=2&&i.push(t.join(" ")),localStorage.setItem("log",JSON.stringify(e)),e})};const ye=ne,X=Ae;function ke(t,e,i){const r=t.slice();return r[3]=e[i],r[5]=i,r}function Ee(t){let e,i=t[5]+1+"",r,l,s=t[3]+"",o;return{c(){e=V("p"),r=q(i),l=q(". "),o=q(s)},l(f){e=D(f,"P",{});var g=j(e);r=H(g,i),l=H(g,". "),o=H(g,s),g.forEach(k)},m(f,g){U(f,e,g),v(e,r),v(e,l),v(e,o)},p(f,g){g&2&&s!==(s=f[3]+"")&&se(o,s)},d(f){f&&k(e)}}}function rt(t){let e,i,r,l,s,o=t[1],f=[];for(let g=0;g<o.length;g+=1)f[g]=Ee(ke(t,o,g));return{c(){e=V("div"),i=V("div"),r=q("LOG"),l=B(),s=V("div");for(let g=0;g<f.length;g+=1)f[g].c();this.h()},l(g){e=D(g,"DIV",{class:!0});var c=j(e);i=D(c,"DIV",{});var m=j(i);r=H(m,"LOG"),m.forEach(k),l=J(c),s=D(c,"DIV",{});var p=j(s);for(let _=0;_<f.length;_+=1)f[_].l(p);p.forEach(k),c.forEach(k),this.h()},h(){y(e,"class","ml-5 font-mono relative h-96 flex flex-col-reverse overflow-y-auto")},m(g,c){U(g,e,c),v(e,i),v(i,r),t[2](i),v(e,l),v(e,s);for(let m=0;m<f.length;m+=1)f[m].m(s,null)},p(g,[c]){if(c&2){o=g[1];let m;for(m=0;m<o.length;m+=1){const p=ke(g,o,m);f[m]?f[m].p(p,c):(f[m]=Ee(p),f[m].c(),f[m].m(s,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=o.length}},i:le,o:le,d(g){g&&k(e),t[2](null),fe(f,g)}}}function nt(t,e,i){let r,l=[];Le(()=>{}),ye&&ye.subscribe(o=>{i(1,l=o),r&&r.scrollIntoView()});function s(o){x[o?"unshift":"push"](()=>{r=o,i(0,r)})}return[r,l,s]}class ot extends oe{constructor(e){super(),ae(this,e,nt,rt,ce,{})}}function Ie(t){let e,i,r,l,s,o=t[0].state+"",f,g,c,m,p,_,d=t[0].win&&Se(t),I=t[0].stale&&Oe(),N=t[0].resign&&Ve(t);return{c(){e=V("div"),d&&d.c(),i=B(),I&&I.c(),r=B(),N&&N.c(),l=B(),s=V("p"),f=q(o),g=B(),c=V("button"),m=q("Reset"),this.h()},l(T){e=D(T,"DIV",{class:!0});var O=j(e);d&&d.l(O),i=J(O),I&&I.l(O),r=J(O),N&&N.l(O),l=J(O),s=D(O,"P",{class:!0});var L=j(s);f=H(L,o),L.forEach(k),g=J(O),c=D(O,"BUTTON",{class:!0});var S=j(c);m=H(S,"Reset"),S.forEach(k),O.forEach(k),this.h()},h(){y(s,"class","text-xl mt-3"),y(c,"class","text-xl mt-5 z-[5000]"),y(e,"class","w-screen h-screen bg-[black] opacity-1 fixed top-0 left-0 z-[1000] text-[white] flex justify-center items-center flex-col overflow-hidden")},m(T,O){U(T,e,O),d&&d.m(e,null),v(e,i),I&&I.m(e,null),v(e,r),N&&N.m(e,null),v(e,l),v(e,s),v(s,f),v(e,g),v(e,c),v(c,m),p||(_=Te(c,"click",t[1]),p=!0)},p(T,O){T[0].win?d?d.p(T,O):(d=Se(T),d.c(),d.m(e,i)):d&&(d.d(1),d=null),T[0].stale?I||(I=Oe(),I.c(),I.m(e,r)):I&&(I.d(1),I=null),T[0].resign?N?N.p(T,O):(N=Ve(T),N.c(),N.m(e,l)):N&&(N.d(1),N=null),O&1&&o!==(o=T[0].state+"")&&se(f,o)},d(T){T&&k(e),d&&d.d(),I&&I.d(),N&&N.d(),p=!1,_()}}}function Se(t){let e,i=t[0].who+"",r,l;return{c(){e=V("h1"),r=q(i),l=q(" Won!"),this.h()},l(s){e=D(s,"H1",{class:!0});var o=j(e);r=H(o,i),l=H(o," Won!"),o.forEach(k),this.h()},h(){y(e,"class","text-2xl text-orange")},m(s,o){U(s,e,o),v(e,r),v(e,l)},p(s,o){o&1&&i!==(i=s[0].who+"")&&se(r,i)},d(s){s&&k(e)}}}function Oe(t){let e,i;return{c(){e=V("h1"),i=q("Stalemate!"),this.h()},l(r){e=D(r,"H1",{class:!0});var l=j(e);i=H(l,"Stalemate!"),l.forEach(k),this.h()},h(){y(e,"class","text-2xl text-orange")},m(r,l){U(r,e,l),v(e,i)},d(r){r&&k(e)}}}function Ve(t){let e,i=t[0].who+"",r,l;return{c(){e=V("h1"),r=q(i),l=q(" resigned!"),this.h()},l(s){e=D(s,"H1",{class:!0});var o=j(e);r=H(o,i),l=H(o," resigned!"),o.forEach(k),this.h()},h(){y(e,"class","text-2xl text-orange")},m(s,o){U(s,e,o),v(e,r),v(e,l)},p(s,o){o&1&&i!==(i=s[0].who+"")&&se(r,i)},d(s){s&&k(e)}}}function at(t){let e,i=(t[0].win||t[0].stale||t[0].resign)&&Ie(t);return{c(){i&&i.c(),e=ie()},l(r){i&&i.l(r),e=ie()},m(r,l){i&&i.m(r,l),U(r,e,l)},p(r,[l]){r[0].win||r[0].stale||r[0].resign?i?i.p(r,l):(i=Ie(r),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:le,o:le,d(r){i&&i.d(r),r&&k(e)}}}function ct(t,e,i){let{state:r}=e;const l=()=>{if(!r.resign){localStorage.clear(),window.location.reload();return}localStorage.removeItem("game_id"),window.location.href="/multi"};return t.$$set=s=>{"state"in s&&i(0,r=s.state)},[r,l]}class ft extends oe{constructor(e){super(),ae(this,e,ct,at,ce,{state:0})}}function De(t,e,i){const r=t.slice();return r[27]=e[i],r[28]=e,r[29]=i,r}function je(t,e,i){const r=t.slice();return r[27]=e[i],r[30]=e,r[31]=i,r}function ht(t){let e,i,r,l,s,o,f,g=t[29],c=t[31];const m=()=>t[10](e,g,c),p=()=>t[10](null,g,c);return{c(){e=V("div"),i=V("div"),r=V("div"),l=B(),s=V("img"),this.h()},l(_){e=D(_,"DIV",{id:!0,class:!0});var d=j(e);i=D(d,"DIV",{id:!0});var I=j(i);r=D(I,"DIV",{id:!0}),j(r).forEach(k),I.forEach(k),l=J(d),s=D(d,"IMG",{src:!0,class:!0,alt:!0}),d.forEach(k),this.h()},h(){y(r,"id","overlay"),y(i,"id","indicator"),Z(s.src,o=t[0][t[4][t[29]]+(t[31]+1)].tile)||y(s,"src",o),y(s,"class","object-contain p-2"),y(s,"alt",f=t[0][t[4][t[29]]+(t[31]+1)].tile),y(e,"id",t[4][t[29]]+(t[31]+1)),y(e,"class","w-[30%] h-0 pb-[12.6%] relative bg-blush tile")},m(_,d){U(_,e,d),v(e,i),v(i,r),v(e,l),v(e,s),m()},p(_,d){t=_,d[0]&1&&!Z(s.src,o=t[0][t[4][t[29]]+(t[31]+1)].tile)&&y(s,"src",o),d[0]&1&&f!==(f=t[0][t[4][t[29]]+(t[31]+1)].tile)&&y(s,"alt",f),(g!==t[29]||c!==t[31])&&(p(),g=t[29],c=t[31],m())},d(_){_&&k(e),p()}}}function ut(t){let e,i,r,l,s,o,f,g=t[29],c=t[31];const m=()=>t[9](e,g,c),p=()=>t[9](null,g,c);return{c(){e=V("div"),i=V("div"),r=V("div"),l=B(),s=V("img"),this.h()},l(_){e=D(_,"DIV",{id:!0,class:!0});var d=j(e);i=D(d,"DIV",{id:!0});var I=j(i);r=D(I,"DIV",{id:!0}),j(r).forEach(k),I.forEach(k),l=J(d),s=D(d,"IMG",{src:!0,class:!0,alt:!0}),d.forEach(k),this.h()},h(){y(r,"id","overlay"),y(i,"id","indicator"),Z(s.src,o=t[0][t[4][t[29]]+(t[31]+1)].tile)||y(s,"src",o),y(s,"class","object-contain p-2"),y(s,"alt",f=t[0][t[4][t[29]]+(t[31]+1)].tile),y(e,"id",t[4][t[29]]+(t[31]+1)),y(e,"class","w-[30%] h-0 pb-[12.6%] relative bg-green tile")},m(_,d){U(_,e,d),v(e,i),v(i,r),v(e,l),v(e,s),m()},p(_,d){t=_,d[0]&1&&!Z(s.src,o=t[0][t[4][t[29]]+(t[31]+1)].tile)&&y(s,"src",o),d[0]&1&&f!==(f=t[0][t[4][t[29]]+(t[31]+1)].tile)&&y(s,"alt",f),(g!==t[29]||c!==t[31])&&(p(),g=t[29],c=t[31],m())},d(_){_&&k(e),p()}}}function dt(t){let e,i,r,l,s,o,f,g=t[29],c=t[31];const m=()=>t[8](e,g,c),p=()=>t[8](null,g,c);return{c(){e=V("div"),i=V("div"),r=V("div"),l=B(),s=V("img"),this.h()},l(_){e=D(_,"DIV",{id:!0,class:!0});var d=j(e);i=D(d,"DIV",{id:!0});var I=j(i);r=D(I,"DIV",{id:!0}),j(r).forEach(k),I.forEach(k),l=J(d),s=D(d,"IMG",{src:!0,class:!0,alt:!0}),d.forEach(k),this.h()},h(){y(r,"id","overlay"),y(i,"id","indicator"),Z(s.src,o=t[0][t[4][t[29]]+(t[31]+1)].tile)||y(s,"src",o),y(s,"class","object-contain p-2"),y(s,"alt",f=t[0][t[4][t[29]]+(t[31]+1)].tile),y(e,"id",t[4][t[29]]+(t[31]+1)),y(e,"class","w-[30%] pb-[12.6%] relative h-0 bg-green tile")},m(_,d){U(_,e,d),v(e,i),v(i,r),v(e,l),v(e,s),m()},p(_,d){t=_,d[0]&1&&!Z(s.src,o=t[0][t[4][t[29]]+(t[31]+1)].tile)&&y(s,"src",o),d[0]&1&&f!==(f=t[0][t[4][t[29]]+(t[31]+1)].tile)&&y(s,"alt",f),(g!==t[29]||c!==t[31])&&(p(),g=t[29],c=t[31],m())},d(_){_&&k(e),p()}}}function Ne(t){let e;function i(s,o){return s[31]%2==0&&s[29]%2==0?dt:s[29]%2!=0&&s[31]%2!=0?ut:ht}let l=i(t)(t);return{c(){l.c(),e=ie()},l(s){l.l(s),e=ie()},m(s,o){l.m(s,o),U(s,e,o)},p(s,o){l.p(s,o)},d(s){l.d(s),s&&k(e)}}}function Ge(t){let e,i,r=t[3],l=[];for(let s=0;s<r.length;s+=1)l[s]=Ne(je(t,r,s));return{c(){e=V("div");for(let s=0;s<l.length;s+=1)l[s].c();i=B(),this.h()},l(s){e=D(s,"DIV",{class:!0});var o=j(e);for(let f=0;f<l.length;f+=1)l[f].l(o);i=J(o),o.forEach(k),this.h()},h(){y(e,"class","flex relative")},m(s,o){U(s,e,o);for(let f=0;f<l.length;f+=1)l[f].m(e,null);v(e,i)},p(s,o){if(o[0]&17){r=s[3];let f;for(f=0;f<r.length;f+=1){const g=je(s,r,f);l[f]?l[f].p(g,o):(l[f]=Ne(g),l[f].c(),l[f].m(e,i))}for(;f<l.length;f+=1)l[f].d(1);l.length=r.length}},d(s){s&&k(e),fe(l,s)}}}function gt(t){let e,i,r,l,s,o,f,g,c,m,p,_,d,I,N,T;i=new ft({props:{state:t[1]}});let O=t[4],L=[];for(let S=0;S<O.length;S+=1)L[S]=Ge(De(t,O,S));return d=new ot({}),{c(){e=V("main"),_e(i.$$.fragment),r=B(),l=V("h1"),s=q("Goats and tigers"),o=B(),f=V("button"),g=q("reset"),c=B(),m=V("div"),p=V("div");for(let S=0;S<L.length;S+=1)L[S].c();_=B(),_e(d.$$.fragment),this.h()},l(S){e=D(S,"MAIN",{});var A=j(e);pe(i.$$.fragment,A),r=J(A),l=D(A,"H1",{class:!0});var z=j(l);s=H(z,"Goats and tigers"),z.forEach(k),o=J(A),f=D(A,"BUTTON",{});var M=j(f);g=H(M,"reset"),M.forEach(k),c=J(A),m=D(A,"DIV",{class:!0});var C=j(m);p=D(C,"DIV",{id:!0,class:!0});var F=j(p);for(let $=0;$<L.length;$+=1)L[$].l(F);F.forEach(k),_=J(C),pe(d.$$.fragment,C),C.forEach(k),A.forEach(k),this.h()},h(){y(l,"class","font-sans"),y(p,"id","board-holder"),y(p,"class","h-[25vh] w-[40%] mmd:w-[80%]"),y(m,"class","flex")},m(S,A){U(S,e,A),me(i,e,null),v(e,r),v(e,l),v(l,s),v(e,o),v(e,f),v(f,g),v(e,c),v(e,m),v(m,p);for(let z=0;z<L.length;z+=1)L[z].m(p,null);t[11](p),v(m,_),me(d,m,null),I=!0,N||(T=Te(f,"click",t[7]),N=!0)},p(S,A){const z={};if(A[0]&2&&(z.state=S[1]),i.$set(z),A[0]&25){O=S[4];let M;for(M=0;M<O.length;M+=1){const C=De(S,O,M);L[M]?L[M].p(C,A):(L[M]=Ge(C),L[M].c(),L[M].m(p,null))}for(;M<L.length;M+=1)L[M].d(1);L.length=O.length}},i(S){I||(we(i.$$.fragment,S),we(d.$$.fragment,S),I=!0)},o(S){ve(i.$$.fragment,S),ve(d.$$.fragment,S),I=!1},d(S){S&&k(e),be(i),fe(L,S),t[11](null),be(d),N=!1,T()}}}function R(t){const e=t.split("");return{row:e[0],col:parseInt(e[1]),str:t}}function Y(t){return t=="snake"?"l":t=="bird"?"r":t[0]}function _t(t,e,i){let r,{board:l={}}=e,{multi:s=!1}=e;l.a1!=null?console.log("passed in: ",l):l={};let o,f,g=new Array(8).fill({}),{turn:c="w"}=e;localStorage.getItem("turn")&&(c=localStorage.getItem("turn"));let m="",p=["a","b","c","d","e","f","g","h"];l.a1==null&&p.forEach(n=>{g.forEach((h,w)=>{let u=n+(w+1);i(0,l[u]={tile:"",tile_type:"",tile_color:"",id:u},l)})});async function _(n,h,w){if(n==""){i(0,l[h].tile="",l),i(0,l[h].tile_type="",l),i(0,l[h].tile_color="",l);return}i(0,l[h].tile=st[c][n],l),i(0,l[h].tile_type=n,l),i(0,l[h].tile_color=w,l),localStorage.setItem("board",JSON.stringify(l))}function d(n){let h={};const w=p.indexOf(n.row)-1,u=p.indexOf(n.row)+1,b=n.col-1,a=n.col+1;return b>=1&&p[w]&&(h.diag_left={col:b,row:p[w],str:p[w]+b}),b>=1&&p[u]&&(h.down_diag_left={col:b,row:p[u],str:p[u]+b}),a<=8&&p[w]&&(h.diag_right={col:a,row:p[w],str:p[w]+a}),a<=8&&p[u]&&(h.down_diag_right={col:a,row:p[u],str:p[u]+a}),p[w]&&(h.up={col:n.col,row:p[w],str:p[w]+n.col}),p[u]&&(h.down={col:n.col,row:p[u],str:p[u]+n.col}),a<=8&&(h.right={col:a,row:n.row,str:n.row+a}),b>=1&&(h.left={col:b,row:n.row,str:n.row+b}),h}const I=async()=>{if(localStorage.getItem("board")){let n=localStorage.getItem("board");n=JSON.parse(n),Object.keys(l).forEach(h=>{i(0,l[h].tile=n[h].tile,l),i(0,l[h].tile_type=n[h].tile_type,l),i(0,l[h].tile_color=n[h].tile_color,l),i(0,l[h].id=n[h].id,l)});return}_("goat","h1",c),_("horse","h2",c),_("tiger","h3",c),_("bear","h4",c),_("snake","h5",c),_("mantis-shrimp","h6",c),_("bird","h7",c),_("sloth","h8",c),i(5,c="o"),_("goat","a1",c),_("horse","a2",c),_("tiger","a3",c),_("bear","a4",c),_("snake","a5",c),_("mantis-shrimp","a6",c),_("bird","a7",c),_("sloth","a8",c),i(5,c="w")};function N(){if(s){const n=F();Ue.get(localStorage.getItem("game_id")).set(n)}c=="o"?i(5,c="w"):i(5,c="o"),T()}function T(){f.forEach(n=>{n.el.className=n.el.className.replace("option","").replace("is-tile","")})}function O(){let n=Object.values(l).filter(u=>u.tile!="").map(u=>({tile:u,pos:R(u.id)})),h=[],w=[];return n.forEach(u=>{u.tile.tile_color=="o"&&h.push(u),u.tile.tile_color=="w"&&w.push(u)}),{orange:h,white:w}}function L(){let n={who:"",state:"",win:!1,stale:!1};const h=O().white.filter(a=>(K.includes(a.tile.tile_type)||a.tile.tile_type=="bird")&&(a.pos.str=="b8"||a.pos.str=="c8"||a.pos.str=="d8"||a.pos.str=="e8"||a.pos.str=="f8"||a.pos.str=="g8")),w=O().white.filter(a=>(K.includes(a.tile.tile_type)||a.tile.tile_type=="bird")&&(a.pos.str=="b1"||a.pos.str=="c1"||a.pos.str=="d1"||a.pos.str=="e1"||a.pos.str=="f1"||a.pos.str=="g1")),u=O().orange.filter(a=>(K.includes(a.tile.tile_type)||a.tile.tile_type=="bird")&&(a.pos.str=="b8"||a.pos.str=="c8"||a.pos.str=="d8"||a.pos.str=="e8"||a.pos.str=="f8"||a.pos.str=="g8")),b=O().orange.filter(a=>(K.includes(a.tile.tile_type)||a.tile.tile_type=="bird")&&(a.pos.str=="b1"||a.pos.str=="c1"||a.pos.str=="d1"||a.pos.str=="e1"||a.pos.str=="f1"||a.pos.str=="g1"));return(b.length==4&&w.length==0||w.length==4&&b.length==0)&&(n.win=!0,n.who="Orange",b.length==4?n.state="Orange won with 4 passive tiles aligned to the left.":n.state="Orange won with 4 passive tiles aligned to the right."),(h.length==4&&u.length==0||u.length==4&&h.length==0)&&(n.win=!0,n.who="White",w.length==4?n.state="White won with 4 passive tiles aligned to the left.":n.state="White won with 4 passive tiles aligned to the right."),n}function S(){let n={state:"",who:"",win:!1,stale:!1};const h=O();let w=h.orange.filter(G=>K.includes(G.tile.tile_type)||G.tile.tile_type=="bird"),u=h.orange.filter(G=>Q.includes(G.tile.tile_type)),b=h.white.filter(G=>K.includes(G.tile.tile_type)||G.tile.tile_type=="bird"),a=h.white.filter(G=>Q.includes(G.tile.tile_type));return u.length==0&&w.length!=0?(n.state="Stalemate there's no fair game with no orange aggressive tiles.",n.stale=!0,n):a.length==0&&b.length!=0?(n.state="Stalemate there's no fair game with no white aggressive tiles.",n.stale=!0,n):w.length==0?(n.state="White took orange's passive tiles.",n.win=!0,n.who="White",n):b.length==0?(n.state="Orange took white's passive tiles.",n.win=!0,n.who="Orange",n):L()}let{game_state:A={}}=e;function z(n,h){var u,b,a,G,P,ee,re,te,he,ue,de,ge;let w=l[n.str];if(Q.includes(w.tile_type)&&w.tile_type!="bird"){const E=d(n);return!(c=="o"&&((u=E==null?void 0:E.down_diag_left)==null?void 0:u.str)!=h.str&&((b=E==null?void 0:E.down_diag_right)==null?void 0:b.str)!=h.str&&((a=E==null?void 0:E.diag_right)==null?void 0:a.str)!=h.str&&((G=E==null?void 0:E.diag_left)==null?void 0:G.str)!=h.str||c=="w"&&((P=E==null?void 0:E.diag_left)==null?void 0:P.str)!=h.str&&((ee=E==null?void 0:E.diag_right)==null?void 0:ee.str)!=h.str&&((re=E==null?void 0:E.down_diag_left)==null?void 0:re.str)!=h.str&&((te=E==null?void 0:E.down_diag_right)==null?void 0:te.str)!=h.str)}else{const E=d(n);return!(w.tile_type=="sloth"&&((he=E==null?void 0:E.up)==null?void 0:he.str)!=h.str&&((ue=E==null?void 0:E.down)==null?void 0:ue.str)!=h.str&&((de=E==null?void 0:E.left)==null?void 0:de.str)!=h.str&&((ge=E==null?void 0:E.right)==null?void 0:ge.str)!=h.str)}}Le(()=>{I(),r.querySelectorAll(".tile").forEach(n=>{const h=async w=>{const u=S();if(u.win==!0){X(u.state),i(1,A=u),n.removeEventListener("click",h);return}if(u.stale==!0){X(u.state),i(1,A=u),n.removeEventListener("click",h);return}let b=w.target,a=b.id;(!l[a]||a.length==0)&&(a=="overlay"?(a=b.parentElement.parentElement.id,b=b.parentElement.parentElement):(a=b.parentElement.id,b=b.parentElement));const G=R(a);if(l[a].tile_color==c||l[a].tile_type==""||m=="moving"){if(l[a].tile_color==c&&m=="moving"){o=l[a],m="moving",T(),f=M();return}if(m==""&&l[a].tile_type!=""){o=l[a],m="moving",f=M();return}if(m=="moving"){const P=R(o.id),ee=d(P);if(!Object.values(ee).map(te=>te.str).includes(G.str))return;if(l[a].tile_type==""){if(!z(P,R(a)))return;X(Y(o.tile_type)+a),_(o.tile_type,G.str,c),_("",R(o.id).str,c),o=null,m="",N(),F(),localStorage.setItem("board",JSON.stringify(l));return}if(l[a].tile_type!=""&&l[a].tile_color!=c&&Q.includes(o.tile_type)){if(!C(P,G)){X("Invalid consumption at",G.str);return}X(Y(o.tile_type)+o.id+"-"+Y(l[a].tile_type)+a),_("",G.str,c),_(o.tile_type,G.str,c),_("",o.id,c),o=null,m="",N(),F();return}else if(!Q.includes(o.tile_type)){X("passive",o.tile_type,"cannot consume",G.str);return}}return}else return};n.addEventListener("click",h)})});function M(){if(o){const n=d(R(o.id));let h=[];return Object.keys(n).forEach(w=>{const u=l[n[w].str],b=z(R(o.id),n[w]),a=C(R(o.id),n[w]);!b&&!a||u.tile_type==""&&a&&!b||(u.tile_color!=c&&a&&u.tile_type!=""&&!K.includes(o.tile_type)&&(u.el.className+=" option is-tile"),u.tile_type==""&&(u.el.className+=" option"),h.push(l[n[w].str]))}),h}}function C(n,h){var b,a,G,P;const w=l[n.str];if(!Q.includes(w.tile_type))return!1;const u=d(n);return!(c=="w"&&((b=u==null?void 0:u.up)==null?void 0:b.str)!=h.str&&((a=u==null?void 0:u.diag_left)==null?void 0:a.str)!=h.str||c=="o"&&((G=u==null?void 0:u.down)==null?void 0:G.str)!=h.str&&((P=u==null?void 0:u.down_diag_left)==null?void 0:P.str)!=h.str)}function F(){let n={a:[],b:[],c:[],d:[],e:[],f:[],g:[],h:[]};Object.keys(l).forEach(w=>{const u=l[w];if(u.tile_type.length&&Y(u.tile_type))u.tile_color=="o"?n[w[0]].push(Y(u.tile_type).toUpperCase()):n[w[0]].push(Y(u.tile_type));else{const b=n[w[0]];if(parseInt(b[b.length-1])){const a=parseInt(b[b.length-1]);b[b.length-1]=a+1}else b.push("1")}});const h=Object.values(n).join("/").replace(/\,/g,"");if(localStorage.setItem("fen_state",h),c=="w")return h+" o";if(c=="o")return h+" w"}const $=()=>{localStorage.clear(),window.location.reload()};function Me(n,h,w){x[n?"unshift":"push"](()=>{l[p[h]+(w+1)].el=n,i(0,l)})}function We(n,h,w){x[n?"unshift":"push"](()=>{l[p[h]+(w+1)].el=n,i(0,l)})}function Be(n,h,w){x[n?"unshift":"push"](()=>{l[p[h]+(w+1)].el=n,i(0,l)})}function Je(n){x[n?"unshift":"push"](()=>{r=n,i(2,r)})}return t.$$set=n=>{"board"in n&&i(0,l=n.board),"multi"in n&&i(6,s=n.multi),"turn"in n&&i(5,c=n.turn),"game_state"in n&&i(1,A=n.game_state)},[l,A,r,g,p,c,s,$,Me,We,Be,Je]}class bt extends oe{constructor(e){super(),ae(this,e,_t,gt,ce,{board:0,multi:6,turn:5,game_state:1},null,[-1,-1])}}export{bt as B,W as g};
